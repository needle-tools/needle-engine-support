# рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ

Needle Engine рдореЗрдВ рдорд▓реНрдЯреАрдкреНрд▓реЗрдпрд░ рдЕрдиреБрднрд╡ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреВрд░реНрдг рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рдорд╛рдзрд╛рди рд╢рд╛рдорд┐рд▓ рд╣реИред рд╣рдорд╛рд░реЗ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХрдВрдкреЛрдиреЗрдВрдЯ рдФрд░ API рдХреЗ рд╕рд╛рде рд╕рд╛рдЭрд╛ рд╡рд░реНрд▓реНрдб рд╕реНрдЯреЗрдЯ, рд╡реЙрдпрд╕ рдЪреИрдЯ, рд╕реЗрд╢рди рдкрд░реНрд╕рд┐рд╕реНрдЯреЗрдВрд╕ рдФрд░ рдмрд╣реБрдд рдХреБрдЫ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдЖрдк рдСрдЯреЛрдореИрдЯрд┐рдХ рдпрд╛ рдореИрдиреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХреЗ рд╡рд┐рдХрд▓реНрдк рдХреЗ рд╕рд╛рде рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдХрдВрдкреЛрдиреЗрдВрдЯ рдХреЛ рдиреЗрдЯрд╡рд░реНрдХ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

Needle Engine рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ [Websockets](https://github.com/jjxxs/websocket-ts) рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИред рдЙрдкрдпреЛрдЧ рдореЗрдВ рдЖрд╕рд╛рдиреА рдХреЗ рд▓рд┐рдП рдСрдЯреЛрдореИрдЯрд┐рдХ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ JSON рдбреЗрдЯрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреА рд╣реИред рдЬрдЯрд┐рд▓ рдЙрдкрдпреЛрдЧ рдХреЗ рдорд╛рдорд▓реЛрдВ рдФрд░ рдЙрдЪреНрдЪ-рдкреНрд░рджрд░реНрд╢рди рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП, рд╣рдо [Flatbuffers](https://google.github.io/flatbuffers/) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред

рдХреЛрд░ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рддрдХ рдкрд╣реБрдВрдЪ рдХрдВрдкреЛрдиреЗрдВрдЯ рд╕реЗ ``this.context.connection`` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рд╛рдкреНрдд рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИред рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдмреИрдХрдПрдВрдб рд╕рд░реНрд╡рд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд░реВрдореНрд╕ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рддрд╛ рд╣реИред рдПрдХ рд╣реА рд░реВрдо рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реНрдЯреЗрдЯ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВрдЧреЗ рдФрд░ рдПрдХ-рджреВрд╕рд░реЗ рд╕реЗ рдореИрд╕реЗрдЬ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВрдЧреЗред

## рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХреЙрдиреНрд╕реЗрдкреНрдЯреНрд╕

### рд░реВрдореНрд╕ рдФрд░ рд╕реНрдЯреЗрдЯ

Needle Engine рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХреЗ рдХреЗрдВрджреНрд░ рдореЗрдВ рд╕рд┐рдВрдХреНрд░реЛрдирд╛рдЗрдЬрд╝реНрдб рд░реВрдореНрд╕ рдХреА рдЕрд╡рдзрд╛рд░рдгрд╛ рд╣реИред рдкреНрд░рддреНрдпреЗрдХ рд░реВрдо рдХреА рдПрдХ ID рд╣реЛрддреА рд╣реИ, рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрд╕ ID рдкреНрд░рджрд╛рди рдХрд░рдХреЗ рдПрдХ рд░реВрдо рд╕реЗ рдХрдиреЗрдХреНрдЯ рд╣реЛрддреЗ рд╣реИрдВред рд░реВрдореНрд╕ рд╕рд░реНрд╡рд░ рдкрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реЛрддреЗ рд╣реИрдВ, рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд┐рд╕реА рднреА рд╕рдордп рд░реВрдореНрд╕ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЫреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред рдЬрдм рдХреЛрдИ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд┐рд╕реА рд░реВрдо рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдЙрд╕реЗ рд░реВрдо рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдЯреЗрдЯ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддреА рд╣реИ, рдЙрд╕ рд╡рд░реНрддрдорд╛рди рд╕реНрдЯреЗрдЯ рдХреЛ рдЕрдкрдиреЗ рд╕реАрди рдореЗрдВ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдлрд┐рд░ рд░реВрдо рд╕реНрдЯреЗрдЯ рдореЗрдВ рдмрджрд▓рд╛рд╡ рд╕реБрдирддрд╛ рд╣реИред рдЬрдм рдХреЛрдИ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд┐рд╕реА рд░реВрдо рдХреЛ рдЫреЛрдбрд╝рддрд╛ рд╣реИ, рддреЛ рд╡рд╣ рд░реВрдо рд╕реНрдЯреЗрдЯ рдореЗрдВ рдмрджрд▓рд╛рд╡ рд╕реБрдирдирд╛ рдмрдВрдж рдХрд░ рджреЗрддрд╛ рд╣реИред

рд░реВрдо рд╕реНрдЯреЗрдЯ рд╕рд░реНрд╡рд░ рдкрд░ JSON рдбреЗрдЯрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реЛрддреА рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╕рднреА рдмрджрд▓рд╛рд╡ рдкрд░реНрд╕рд┐рд╕реНрдЯреЗрдВрдЯ рд╣реЛрддреЗ рд╣реИрдВред рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рд░реВрдо рд╕реНрдЯреЗрдЯ рди рдХреЗрд╡рд▓ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реИ, рдмрд▓реНрдХрд┐ рдПрдХ рд╣реА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдЧрддрд┐рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рдкрд░реНрд╕рд┐рд╕реНрдЯреЗрдВрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рднреА рдЙрдкрдпреЛрдЧреА рд╣реИред

рдиреАрдбрд▓ рд░реВрдореНрд╕ рдХреЗ рд▓рд┐рдП _рдХреЗрд╡рд▓-рджреЗрдЦрдиреЗ рдпреЛрдЧреНрдп ID_ рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдХреЗрд╡рд▓-рджреЗрдЦрдиреЗ рдпреЛрдЧреНрдп ID рдХреЗ рд╕рд╛рде рдПрдХ рд░реВрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд░реВрдо рдХреЗ рд╕рд╛рде рдЗрдВрдЯрд░реИрдХреНрдЯ рдирд╣реАрдВ рдХрд░ рдкрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди рд╡рд░реНрддрдорд╛рди рд╕реНрдЯреЗрдЯ рдХреЛ рджреЗрдЦ рдкрд╛рдПрдЧрд╛ рдФрд░ рд▓рд╛рдЗрд╡ рдЕрдкрдбреЗрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░ рдкрд╛рдПрдЧрд╛ред рдпрд╣ рдкреНрд░реЗрдЬреЗрдВрдЯреЗрд╢рди рдпрд╛ рдбреЗрдореЛрдВрд╕реНрдЯреНрд░реЗрд╢рди рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реИред

### рдУрдирд░рд╢рд┐рдк

рдПрдХ рд░реВрдо рдореЗрдВ рдСрдмреНрдЬреЗрдХреНрдЯ _рдУрдиреНрдб_ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдХреЗрд╡рд▓ рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ рдорд╛рд▓рд┐рдХ рд╣реА рдЙрд╕рдХреА рд╕реНрдЯреЗрдЯ рдмрджрд▓ рд╕рдХрддрд╛ рд╣реИред рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ рдХреЛрдИ рдорд╛рд▓рд┐рдХ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред DragControls рдЬреИрд╕реЗ рдХрдВрдкреЛрдиреЗрдВрдЯ рдХрд┐рд╕реА рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд▓реЗ рдЬрд╛рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЙрд╕рдХреА рдУрдирд░рд╢рд┐рдк рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░реЗрдВрдЧреЗред рдХрд╕реНрдЯрдо рдХрдВрдкреЛрдиреЗрдВрдЯ рдореЗрдВ, рдЖрдк рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдУрдирд░рд╢рд┐рдк рдХреЛ рдХреИрд╕реЗ рд╕рдВрднрд╛рд▓рд╛ рдЬрд╛рддрд╛ рд╣реИред рдХрд┐рд╕реА рдУрдирд░рд╢рд┐рдк рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреА рд╣реИ, рдУрдирд░рд╢рд┐рдк рдХреЛ рдХрд┐рд╕реА рдЕрдиреНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛ рд╕рдХрддреА рд╣реИ, рдпрд╛ рдУрдирд░рд╢рд┐рдк рдХреЛ рдХреЗрд╡рд▓ рдХрд┐рд╕реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЧрддрд┐рд╡рд┐рдзрд┐ рджреНрд╡рд╛рд░рд╛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

рдЬрдм рдХреЛрдИ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд┐рд╕реА рд░реВрдо рдХреЛ рдЫреЛрдбрд╝рддрд╛ рд╣реИ, рддреЛ рдЙрд╕ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рд╡рд╛рд▓реЗ рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдпрд╛ рдЙрдирдХреА рдУрдирд░рд╢рд┐рдк рд░реАрд╕реЗрдЯ рдХрд░ рджреА рдЬрд╛рдПрдЧреА, рдпрд╣ рдЗрд╕ рдмрд╛рдд рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреИрд╕реЗ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ред

## рдЕрдкрдиреЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЗ рд▓рд┐рдП рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рдХреНрд╖рдо рдХрд░реЗрдВ

1.  рдЕрдкрдиреЗ рд╕реАрди рдореЗрдВ `SyncedRoom` рдХрдВрдкреЛрдиреЗрдВрдЯ рдЬреЛрдбрд╝реЗрдВред рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдпрд╣ Needle рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд╛рди рдХрд┐рдП рдЧрдП рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдЧрд╛ред
2.  рдХрд┐рд╕реА рдРрд╕реЗ рдСрдмреНрдЬреЗрдХреНрдЯ рдореЗрдВ `SyncedTransform` рдХрдВрдкреЛрдиреЗрдВрдЯ рдЬреЛрдбрд╝реЗрдВ рдЬрд┐рд╕рдХреЗ рдореВрд╡рдореЗрдВрдЯ рдХреЛ рдЖрдк рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рд╕рд┐рдВрдХреНрд░реЛрдирд╛рдЗрдЬрд╝ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред
3.  рдЙрд╕реА рдСрдмреНрдЬреЗрдХреНрдЯ рдореЗрдВ `DragControls` рдХрдВрдкреЛрдиреЗрдВрдЯ рдЬреЛрдбрд╝реЗрдВред
4.  рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЪрд▓рд╛рдПрдБред рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ, "Join Room" рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ URL рдХреЙрдкреА рдХрд░реЗрдВред
5.  рдПрдХ рдирдИ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рд╡рд┐рдВрдбреЛ рдЦреЛрд▓реЗрдВ рдФрд░ URL рдкреЗрд╕реНрдЯ рдХрд░реЗрдВред рдЕрдм рдЖрдкрдХреЛ рджреЛрдиреЛрдВ рд╡рд┐рдВрдбреЛ рдореЗрдВ рд╡рд╣реА рдСрдмреНрдЬреЗрдХреНрдЯ рджрд┐рдЦрд╛рдИ рджреЗрдирд╛ рдЪрд╛рд╣рд┐рдПред рдПрдХ рд╡рд┐рдВрдбреЛ рдореЗрдВ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдЦреАрдВрдЪрдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ рдФрд░ рдЙрд╕реЗ рджреВрд╕рд░реА рд╡рд┐рдВрдбреЛ рдореЗрдВ рдЪрд▓рддреЗ рд╣реБрдП рджреЗрдЦреЗрдВред

`DragControls` рдХрдВрдкреЛрдиреЗрдВрдЯ, Needle рдХреЗ рдХрдИ рдЕрдиреНрдп рдХрдВрдкреЛрдиреЗрдВрдЯ рдХреА рддрд░рд╣, рдмрд┐рд▓реНрдЯ-рдЗрди рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рдкреЛрд░реНрдЯ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдЬреЛ рднреА рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдЦреАрдВрдЪрдирд╛ рд╢реБрд░реВ рдХрд░реЗрдЧрд╛, рдУрдирд░рд╢рд┐рдк рдЙрд╕реЗ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░ рджреА рдЬрд╛рдПрдЧреАред

## рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рдкреЛрд░реНрдЯ рдХреЗ рд╕рд╛рде рдмрд┐рд▓реНрдЯ-рдЗрди рдХрдВрдкреЛрдиреЗрдВрдЯ

| рдХрдВрдкреЛрдиреЗрдВрдЯ           | рд╡рд┐рд╡рд░рдг                                                                                                   |
| :----------------- | :------------------------------------------------------------------------------------------------------ |
| `SyncedRoom`       | рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХрдиреЗрдХреНрд╢рди рдФрд░ рд░реВрдо рд╕реЗ рдХрдиреЗрдХреНрд╢рди рдХреЛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИред                                                     |
| `SyncedTransform`  | рдЯреНрд░рд╛рдВрд╕рдлрд╝реЙрд░реНрдо рдХреЛ рд╕рд┐рдВрдХреНрд░реЛрдирд╛рдЗрдЬрд╝ рдХрд░рдирд╛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИред                                                               |
| `SyncedCamera`     | рд░реВрдо рд╕реЗ рдХрдиреЗрдХреНрдЯреЗрдб рдХрд┐рд╕реА рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рдПрдХ prefab рддреИрдпрд╛рд░ рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЙрдирдХреА рд╕реНрдерд┐рддрд┐ рдХрд╛ рдЕрдиреБрд╕рд░рдг рдХрд░реЗрдЧрд╛ред           |
| `VoIP`             | рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рдмреАрдЪ рд╡реЙрдпрд╕-рдУрд╡рд░-IP рдСрдбрд┐рдпреЛ рдХрдиреЗрдХреНрд╢рди, рдорд╛рдЗрдХреНрд░реЛрдлреЛрди рдПрдХреНрд╕реЗрд╕ рдЖрджрд┐ рдХреЛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИред                         |
| `ScreenCapture`    | рд╡реЗрдм API рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реНрдХреНрд░реАрдирд╢реЗрдпрд░рд┐рдВрдЧ рдХреЛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИред                                                        |
| `Networking`       | рд╕рд░реНрд╡рд░ рдмреИрдХрдПрдВрдб URL рдХреЛ рдХрд╕реНрдЯрдорд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдбреЗрд╡рд▓рдкрдореЗрдВрдЯ рдХреЗ рд▓рд┐рдП рд▓реЛрдХрд▓ рд╕рд░реНрд╡рд░ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреА рднреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред |
| `DragControls`     | рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдЦреАрдВрдЪрдирд╛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИред рдУрдирд░рд╢рд┐рдк рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдЦреАрдВрдЪрдиреЗ рд╡рд╛рд▓реЗ рдЕрдВрддрд┐рдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдкрд╛рд╕ рдХрд░ рджреА рдЬрд╛рдПрдЧреАред |
| `Duplicatable`     | рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдбреБрдкреНрд▓реАрдХреЗрдЯ рдХрд░рдирд╛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИред рдбреБрдкреНрд▓реАрдХреЗрдЯ рдСрдмреНрдЬреЗрдХреНрдЯ рд░реВрдо рдореЗрдВ рд╕рднреА рдХреЗ рд▓рд┐рдП рдЗрдВрд╕реНрдЯреЗрдВрд╢рд┐рдПрдЯ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред        |
| `Deletable`        | рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдбрд┐рд▓реАрдЯ рдХрд░рдирд╛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИред рдбрд┐рд▓реАрдЯ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рд╕рд┐рдВрдХреНрд░реЛрдирд╛рдЗрдЬрд╝ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред                                 |
| `DeleteBox`        | рдЙрди рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдбрд┐рд▓реАрдЯ рдХрд░рдирд╛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИ рдЬрд┐рдирдореЗрдВ рдПрдХ "Deletable" рдХрдВрдкреЛрдиреЗрдВрдЯ рд╣реЛрддрд╛ рд╣реИ рдЬрдм рдЙрдиреНрд╣реЗрдВ рдПрдХ рдмреЙрдХреНрд╕ рд╡реЙрд▓реНрдпреВрдо рдореЗрдВ рдЦреАрдВрдЪрд╛ рдЬрд╛рддрд╛ рд╣реИред |
| `PlayerSync`       | рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рдХрдВрдкреЛрдиреЗрдВрдЯ рдЬреЛ рдкреНрд░рддреНрдпреЗрдХ рдХрдиреЗрдХреНрдЯреЗрдб рдкреНрд▓реЗрдпрд░ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдСрдмреНрдЬреЗрдХреНрдЯ рдЗрдВрд╕реНрдЯреЗрдВрд╢рд┐рдПрдЯ рдХрд░рддрд╛ рд╣реИред                   |
| `PlayerState`      | рдЗрд╕ рдХрдВрдкреЛрдиреЗрдВрдЯ рдХреЛ рдЙрди рдСрдмреНрдЬреЗрдХреНрдЯ рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ рдЬреЛ `PlayerSync` рдХреЛ рдЕрд╕рд╛рдЗрди рдХрд┐рдП рдЧрдП рд╣реИрдВред                               |
| `PlayerColor`      | рдкреНрд▓реЗрдпрд░-рд╡рд┐рд╢рд┐рд╖реНрдЯ рд░рдВрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рд╕рд░рд▓ рдХрдВрдкреЛрдиреЗрдВрдЯред рдкреНрд░рддреНрдпреЗрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд░реВрдо рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдиреЗ рдкрд░ рдПрдХ рд░реИрдВрдбрдо рд░рдВрдЧ рдЕрд╕рд╛рдЗрди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрд╣ рдХрдВрдкреЛрдиреЗрдВрдЯ рдЙрд╕ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рдореБрдЦреНрдп рдореИрдЯреЗрд░рд┐рдпрд▓ рдХреЛ рд╡рд╣ рд░рдВрдЧ рдЕрд╕рд╛рдЗрди рдХрд░рддрд╛ рд╣реИред |
| `WebXR`            | рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрд╡рддрд╛рд░ (рд╣рд╛рде рдФрд░ рд╕рд┐рд░) рдХреЛ рд╕рд┐рдВрдХреНрд░реЛрдирд╛рдЗрдЬрд╝ рдХрд░рдирд╛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИред                                              |

## рдХрд╕реНрдЯрдо рдХрдВрдкреЛрдиреЗрдВрдЯ рдХреЗ рд▓рд┐рдП рдСрдЯреЛрдореИрдЯрд┐рдХ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ

рдЖрдкрдХреЗ рдЕрдкрдиреЗ рдХрдВрдкреЛрдиреЗрдВрдЯ рдХреЗ рдлреАрд▓реНрдбреНрд╕ рдХреЛ рдмрд╣реБрдд рдЖрд╕рд╛рдиреА рд╕реЗ рдиреЗрдЯрд╡рд░реНрдХ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдлреАрд▓реНрдб рдореЗрдВ рдмрджрд▓рд╛рд╡ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдбрд┐рдЯреЗрдХреНрдЯ рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗ рдФрд░ рд░реВрдо рдореЗрдВ рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рднреЗрдЬреЗ рдЬрд╛рдПрдВрдЧреЗред рдмрджрд▓рд╛рд╡ рд░реВрдо рд╕реНрдЯреЗрдЯ рдХреЗ рд╣рд┐рд╕реНрд╕реЗ рдХреЗ рд░реВрдк рдореЗрдВ рднреА рдкрд░реНрд╕рд┐рд╕реНрдЯ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрд╛рдж рдореЗрдВ рд░реВрдо рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрддреЗ рд╣реИрдВ, рдЙрдиреНрд╣реЗрдВ рднреА рдлреАрд▓реНрдб рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдЯреЗрдЯ рдкреНрд░рд╛рдкреНрдд рд╣реЛрдЧреА, рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреЗ рд╣реБрдП рдХрд┐ рд╕рднреА рдХреЛ рд╕рдорд╛рди рдбреЗрдЯрд╛ рджрд┐рдЦрд╛рдИ рджреЗред

рдХрд┐рд╕реА рдХрдВрдкреЛрдиреЗрдВрдЯ рдореЗрдВ рдХрд┐рд╕реА рдлреАрд▓реНрдб рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдиреЗрдЯрд╡рд░реНрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЗрд╕реЗ `@syncField()` рдбреЗрдХреЛрд░реЗрдЯрд░ рд╕реЗ рд╕рдЬрд╛рдПрдБ:

::::code-group
:::code-group-item Sync a number
```ts twoslash
import { Behaviour, syncField, IPointerClickHandler } from "@needle-tools/engine"

export class SyncedNumber extends Behaviour implements IPointerClickHandler {

    // Use `@syncField` to automatically network a field. 
    // You can optionally assign a method or method name to be called when the value changes.
    @syncField("myValueChanged")
    mySyncedValue?: number = 1;
    
    private myValueChanged() {
       console.log("My value changed", this.mySyncedValue);
    }
    
    onPointerClick() {
       this.mySyncedValue = Math.random();
    }
}
```
:::
:::code-group-item Sync an object's color
<!-- SAMPLE network color change -->
:::
::::

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ syncField рдореЗрдВ рдПрдХ рд╡реИрдХрд▓реНрдкрд┐рдХ рдкреИрд░рд╛рдореАрдЯрд░ рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдЙрд╕ рдореЗрдердб рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рд╡реИрд▓реНрдпреВ рдмрджрд▓рдиреЗ рдкрд░ рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рдЗрд╕ рдореЗрдердб рдХреЛ рдЙрд╕реА рдХреНрд▓рд╛рд╕ рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред

::: tip Custom Project Setup
рдпрджрд┐ рдЖрдк рдПрдХ рдХрд╕реНрдЯрдо рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕реЗрдЯрдЕрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ syncField рдбреЗрдХреЛрд░реЗрдЯрд░ рдХреЗ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдЕрдкрдиреА ``tsconfig.json`` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ ``experimentalDecorators: true`` рд╣реЛрдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред Needle Starters рдХреЗ рд╕рд╛рде рдмрдирд╛рдП рдЧрдП рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рдпрд╣ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рд╕рдХреНрд╖рдо рд╣реЛрддрд╛ рд╣реИред
:::

## рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛рдирд╛ рдФрд░ рдирд╖реНрдЯ рдХрд░рдирд╛

рдЕрдХреНрд╕рд░, рдЖрдк рд░рдирдЯрд╛рдЗрдо рдкрд░ рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛рдирд╛ рдФрд░ рдирд╖реНрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рдФрд░ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рдпреЗ рдмрджрд▓рд╛рд╡ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рд╕рд┐рдВрдХреНрд░реЛрдирд╛рдЗрдЬрд╝ рдХрд┐рдП рдЬрд╛рдиреЗ рдЪрд╛рд╣рд┐рдПред

`PlayerSync` рдХрдВрдкреЛрдиреЗрдВрдЯ рдкреНрд░рддреНрдпреЗрдХ рдХрдиреЗрдХреНрдЯреЗрдб рдкреНрд▓реЗрдпрд░ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЗрдВрд╕реНрдЯреЗрдВрд╢рд┐рдПрдЯ рдХрд░рдХреЗ рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╕рд░рд▓ рдмрдирд╛рддрд╛ рд╣реИред рдЬрдм рдХреЛрдИ рдкреНрд▓реЗрдпрд░ рд░реВрдо рдЫреЛрдбрд╝рддрд╛ рд╣реИ, рддреЛ рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдСрдмреНрдЬреЗрдХреНрдЯ рдирд╖реНрдЯ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред

рдЗрд╕рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд, Needle Engine рджреЛ рдЙрдЪреНрдЪ-рд╕реНрддрд░реАрдп рдореЗрдердб рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ:
- [`syncInstantiate()`](https://engine.needle.tools/docs/api/latest/syncInstantiate) рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдбреБрдкреНрд▓реАрдХреЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред
- [`syncDestroy()`](https://engine.needle.tools/docs/api/latest/syncDestroy) рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдирд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред

> ЁЯПЧя╕П рдХреЛрдб рд╕реИрдВрдкрд▓ рдирд┐рд░реНрдорд╛рдгрд╛рдзреАрди рд╣реИрдВ

## рдореИрдиреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ

Needle Engine рдореИрд╕реЗрдЬ рднреЗрдЬрдиреЗ рдФрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд▓реЛ-рд▓реЗрд╡рд▓ API рднреА рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рд╣рдо рдЗрд╕реЗ "рдореИрдиреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ" рдХрд╣рддреЗ рд╣реИрдВред рд╕рд┐рджреНрдзрд╛рдВрдд рд╕рдорд╛рди рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЖрдк рдореИрд╕реЗрдЬ рднреЗрдЬрдиреЗ рдФрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдХреИрд╕реЗ рд╕рдВрднрд╛рд▓рдирд╛ рд╣реИ, рдЗрд╕ рдкрд░ рдкреВрд░реНрдг рдирд┐рдпрдВрддреНрд░рдг рд░рдЦрддреЗ рд╣реИрдВред

### рдореИрд╕реЗрдЬ рднреЗрдЬрдирд╛

рдПрдХ рд╣реА рд░реВрдо рдореЗрдВ рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдПрдХ рдореИрд╕реЗрдЬ рднреЗрдЬреЗрдВ:
```ts
this.context.connection.send(key: string, data: IModel | object | boolean | string | number | null);
```

### рдореИрд╕реЗрдЬ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛

рдЖрдк рдХрд┐рд╕реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХреБрдВрдЬреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд░реВрдо рдореЗрдВ рдЗрд╡реЗрдВрдЯреНрд╕ рдХреА рд╕рджрд╕реНрдпрддрд╛ рд▓реЗ рд╕рдХрддреЗ рд╣реИрдВред рдЖрдорддреМрд░ рдкрд░, рдЖрдк рдЗрд╕реЗ рдЕрдирд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм рдХрд░рдиреЗ рдХреЗ рд╕рд╛рде рдореИрдЪ рдХрд░рдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ:

- `onEnable` рдореЗрдВ рд╕рджрд╕реНрдпрддрд╛ рд▓реЗрдВ рдФрд░ `onDisable` рдореЗрдВ рд╕рджрд╕реНрдпрддрд╛ рд░рджреНрдж рдХрд░реЗрдВ
  рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рд╕рд╛рде, рдСрдмреНрдЬреЗрдХреНрдЯ рдЕрдХреНрд╖рдо рд╣реЛрдиреЗ рдкрд░ рдХреЛрдИ рдореИрд╕реЗрдЬ рдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рд╣реЛрдЧрд╛ред

- рдпрд╛ `start` рдореЗрдВ рд╕рджрд╕реНрдпрддрд╛ рд▓реЗрдВ рдФрд░ `onDestroy` рдореЗрдВ рд╕рджрд╕реНрдпрддрд╛ рд░рджреНрдж рдХрд░реЗрдВ
  рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рд╕рд╛рде, рдСрдмреНрдЬреЗрдХреНрдЯ рдЕрдХреНрд╖рдо рд╣реЛрдиреЗ рдкрд░ рднреА рдореИрд╕реЗрдЬ рдкреНрд░рд╛рдкреНрдд рд╣реЛрдВрдЧреЗред

```ts
this.context.connection.beginListen(key:string, callback:(data) => void)
```

рдЗрд╡реЗрдВрдЯреНрд╕ рд╕реЗ рд╕рджрд╕реНрдпрддрд╛ рд░рджреНрдж рдХрд░реЗрдВ:
```ts
this.context.connection.stopListen(key:string)
```

### рдореИрд╕реЗрдЬ рдкрд░реНрд╕рд┐рд╕реНрдЯреЗрдВрд╕ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдирд╛

рдиреЗрдЯрд╡рд░реНрдХ рдореИрд╕реЗрдЬ рднреЗрдЬрддреЗ рд╕рдордп, рд▓реЛ-рд▓реЗрд╡рд▓ API рдЖрдкрдХреЛ рдпрд╣ рддрдп рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдХрд┐ рдореИрд╕реЗрдЬ рдХреЛ рдкрд░реНрд╕рд┐рд╕реНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП (рд░реВрдо рд╕реНрдЯреЗрдЯ рдореЗрдВ рд╕рд╣реЗрдЬрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП) рдпрд╛ рдирд╣реАрдВ (рдХреЗрд╡рд▓ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рд░реВрдо рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рднреЗрдЬрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП)ред рдХрд┐рд╕реА рдореИрд╕реЗрдЬ рдХреЛ рдкрд░реНрд╕рд┐рд╕реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЙрд╕рдореЗрдВ `guid` рдлрд╝реАрд▓реНрдб рд╣реИред рдЗрд╕ рдлрд╝реАрд▓реНрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдЖрдорддреМрд░ рдкрд░ рдореИрд╕реЗрдЬ рдбреЗрдЯрд╛ рдХреЛ рдХрд┐рд╕реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдСрдмреНрдЬреЗрдХреНрдЯ рдкрд░ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЙрд╕ рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ guid рдкреНрд░рджрд╛рди рдХрд░рдХреЗред рдпрджрд┐ рдЖрдк рдХрд┐рд╕реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рд▓рдХреНрд╖рд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ (рдФрд░ рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдПрдХ `guid` рдлрд╝реАрд▓реНрдб рд╢рд╛рдорд┐рд▓ рдХрд░реЗрдВ) рд▓реЗрдХрд┐рди рдбреЗрдЯрд╛ рдХреЛ рдкрд░реНрд╕рд┐рд╕реНрдЯ рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдЕрдкрдиреЗ рдореИрд╕реЗрдЬ рдореЗрдВ `dontSave` рдлрд╝реАрд▓реНрдб рдХреЛ `true` рдкрд░ рд╕реЗрдЯ рдХрд░реЗрдВред

рд╕рднреА рдкрд░реНрд╕рд┐рд╕реНрдЯреЗрдВрдЯ рдореИрд╕реЗрдЬ рд░реВрдо рд╕реНрдЯреЗрдЯ рдореЗрдВ рд╕рд╣реЗрдЬреЗ рдЬрд╛рддреЗ рд╣реИрдВ рдФрд░ рдмрд╛рдж рдореЗрдВ рдХрдиреЗрдХреНрдЯ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рднреЗрдЬреЗ рдЬрд╛рдПрдВрдЧреЗред рдЧреИрд░-рдкрд░реНрд╕рд┐рд╕реНрдЯреЗрдВрдЯ рдореИрд╕реЗрдЬ рдХреЗрд╡рд▓ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рд░реВрдо рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рднреЗрдЬреЗ рдЬрд╛рддреЗ рд╣реИрдВ, рдЬреЛ рдЙрди рдЗрдлрд╝реЗрдХреНрдЯреНрд╕ (рдЬреИрд╕реЗ рд╕рд╛рдЙрдВрдб рдЗрдлрд╝реЗрдХреНрдЯ рдЪрд▓рд╛рдирд╛) рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реИ рдЬреЛ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рд░реВрдо рдореЗрдВ рдирд╣реАрдВ рд╣реИрдВ, рдЙрди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдЪрд▓рд╛рдирд╛ рд╕рдордЭ рдореЗрдВ рдирд╣реАрдВ рдЖрддрд╛ рд╣реИред рд╡реИрдХрд▓реНрдкрд┐рдХ рд░реВрдк рд╕реЗ, рдЖрдк рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рд╣реЛрдиреЗ рдкрд░ рдЗрд╕ рд╡рд┐рд╢реЗрд╖ рдореИрд╕реЗрдЬ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ рдореИрд╕реЗрдЬ рдореЗрдВ `deleteOnDisconnect` рдлрд╝реАрд▓реНрдб рд╢рд╛рдорд┐рд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

```ts
// рдпрд╣ рдореИрд╕реЗрдЬ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рд░реВрдо рдореЗрдВ рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рднреЗрдЬрд╛ рдЬрд╛рдПрдЧрд╛,
// рдФрд░ рдЙрди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдЬреЛ рдмрд╛рдж рдореЗрдВ рд░реВрдо рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрддреЗ рд╣реИрдВред
this.context.connection.send("my-message", { guid: this.guid, myData: "myValue" });

// рдпрд╣ рдореИрд╕реЗрдЬ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рд░реВрдо рдореЗрдВ рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рднреЗрдЬрд╛ рдЬрд╛рдПрдЧрд╛,
// рд▓реЗрдХрд┐рди рдЙрди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдирд╣реАрдВ рднреЗрдЬрд╛ рдЬрд╛рдПрдЧрд╛ рдЬреЛ рдмрд╛рдж рдореЗрдВ рд░реВрдо рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрддреЗ рд╣реИрдВред
this.context.connection.send("my-message", { guid: this.guid, myData: "myValue", dontSave: true });

// рдпрд╣ рдореИрд╕реЗрдЬ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рд░реВрдо рдореЗрдВ рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рднреЗрдЬрд╛ рдЬрд╛рдПрдЧрд╛,
// рд▓реЗрдХрд┐рди рдЙрди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдирд╣реАрдВ рднреЗрдЬрд╛ рдЬрд╛рдПрдЧрд╛ рдЬреЛ рдмрд╛рдж рдореЗрдВ рд░реВрдо рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрддреЗ рд╣реИрдВред
this.context.connection.send("my-message", { myData: "myValue" });

// рдпрд╣ рдореИрд╕реЗрдЬ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рд░реВрдо рдореЗрдВ рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рднреЗрдЬрд╛ рдЬрд╛рдПрдЧрд╛,
// рдФрд░ рдЙрди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдЬреЛ рдмрд╛рдж рдореЗрдВ рд░реВрдо рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрддреЗ рд╣реИрдВ,
// рд▓реЗрдХрд┐рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рд╣реЛрдиреЗ рдкрд░ рдЗрд╕реЗ рд░реВрдо рд╕реНрдЯреЗрдЯ рд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред
this.context.connection.send("my-message", { guid: this.guid, myData: "myValue", deleteOnDisconnect: true });
```

рдмреИрдХрдПрдВрдб рд╕реНрдЯреЛрд░реЗрдЬ рд╕реЗ рдХрд┐рд╕реА рд╡рд┐рд╢рд┐рд╖реНрдЯ guid рдХреЗ рд▓рд┐рдП рд╕реНрдЯреЗрдЯ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдореИрд╕реЗрдЬ рдХреБрдВрдЬреА рдХреЛ `delete-state` рдкрд░ рд╕реЗрдЯ рдХрд░реЗрдВ рдФрд░ рдЙрд╕рдХреЗ guid рдХреЗ рд╕рд╛рде рдХрд┐рд╕реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рд▓рдХреНрд╖рд┐рдд рдХрд░реЗрдВ: `{ guid: "guid_to_delete" } `ред

```ts
this.context.connection.send("delete-state", { guid: "guid_to_delete" });
```

### рдиреЗрдЯрд╡рд░реНрдХ рдореИрд╕реЗрдЬ рдХреЛ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдмрдЧ рдлрд╝реНрд▓реИрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛

рдиреЗрдЯрд╡рд░реНрдХ рдореИрд╕реЗрдЬ рдореЗрдВ рдЧрд╣рд░рд╛рдИ рд╕реЗ рдЬрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ рдбрд┐рдмрдЧ рдлрд╝реНрд▓реИрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдЗрдиреНрд╣реЗрдВ рдкреЗрдЬ URL рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреИрд╕реЗ `https://localhost:3000/?debugnet`ред

| рдлрд╝реНрд▓реИрдЧ         | рд╡рд┐рд╡рд░рдг                                          |
| :----------- | :--------------------------------------------- |
| `?debugnet`  | рд╕рднреА рдЗрдирдХрдорд┐рдВрдЧ рдФрд░ рдЖрдЙрдЯрдЧреЛрдЗрдВрдЧ рдиреЗрдЯрд╡рд░реНрдХ рдореИрд╕реЗрдЬ рдХреЛ рдХрдВрд╕реЛрд▓ рдореЗрдВ рд▓реЙрдЧ рдХрд░реЗрдВ |
| `?debugowner` | рд╕рднреА рдУрдирд░рд╢рд┐рдк рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рдФрд░ рдмрджрд▓рд╛рд╡ рдХреЛ рдХрдВрд╕реЛрд▓ рдореЗрдВ рд▓реЙрдЧ рдХрд░реЗрдВ      |
| `?debugnetbin` | рдЗрдирдХрдорд┐рдВрдЧ рдФрд░ рдЖрдЙрдЯрдЧреЛрдЗрдВрдЧ рдмрд╛рдЗрдирд░реА рдореИрд╕реЗрдЬ рдХреЗ рд▓рд┐рдП рдЕрддрд┐рд░рд┐рдХреНрдд рдЬрд╛рдирдХрд╛рд░реА рд▓реЙрдЧ рдХрд░реЗрдВ |

## рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд▓рд╛рдЗрдлрд╝рд╕рд╛рдЗрдХрд▓ рдЗрд╡реЗрдВрдЯреНрд╕

рдЖрдкрдХреЗ рдХрдВрдкреЛрдиреЗрдВрдЯ рдореЗрдВ рд╕реБрдирдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЗрд╡реЗрдВрдЯ рдЙрдкрд▓рдмреНрдз рд╣реИрдВред рд╡реЗ рд╕рд╛рдорд╛рдиреНрдп рдиреЗрдЯрд╡рд░реНрдХ рдЗрд╡реЗрдВрдЯреНрд╕ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддреЗ рд╣реИрдВ рдЬрд┐рди рдкрд░ рдЖрдк рдЕрдкрдиреЗ рдХрдВрдкреЛрдиреЗрдВрдЯ рдореЗрдВ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рджреЗрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд┐ рдЖрдк рд╕реНрд╡рдпрдВ рдпрд╛ рдХреЛрдИ рдЕрдиреНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд░реВрдо рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдирд╛ рдпрд╛ рдЫреЛрдбрд╝рдирд╛ред

```ts
// Listen to the event when *you* have joined a networked room
this.context.beginListen(RoomEvents.JoinedRoom, ({room, viewId, allowEditing, inRoom}) => { ... });

// Listen to the event when *you* have left a networked room
this.context.beginListen(RoomEvents.LeftRoom, ({room}) => { ... });

// Listen to the event when *another user* has joined your networked room
this.context.beginListen(RoomEvents.UserJoinedRoom, ({userId}) => { ... });

// Listen to the event when *another user* has left your networked room
this.context.beginListen(RoomEvents.UserLeftRoom, ({userId}) => { ... });

// This event is received after all current room state has been sent to the client
this.context.beginListen(RoomEvents.RoomStateSent, () => { ... });
```

- [API рдбреЙрдХреНрд╕ рдореЗрдВ рд╕рднреА Room Events рджреЗрдЦреЗрдВ](https://engine.needle.tools/docs/api/latest/RoomEvents)
- [API рдбреЙрдХреНрд╕ рдореЗрдВ рд╕рднреА Ownership Events рджреЗрдЦреЗрдВ](https://engine.needle.tools/docs/api/latest/OwnershipEvent)
- [API рдбреЙрдХреНрд╕ рдореЗрдВ рд╕рднреА Connection Events рджреЗрдЦреЗрдВ](https://engine.needle.tools/docs/api/latest/ConnectionEvents)

## Needle рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рд░реНрд╡рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдиреЗрдЯрд╡рд░реНрдХ рд╡рд╛рд▓реЗ Needle рд╕реАрди Needle рджреНрд╡рд╛рд░рд╛ рдкреНрд░рдмрдВрдзрд┐рдд рдФрд░ рдкреНрд░рджрд╛рди рдХрд┐рдП рдЧрдП рдХреНрд▓рд╛рдЙрдб рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рд╣реЛрддреЗ рд╣реИрдВред рдЗрд╕ рд╕реЗрд╡рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдЕрддрд┐рд░рд┐рдХреНрдд рд╕реЗрдЯрдЕрдк рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдФрд░ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдХреЛрдИ рдЕрддрд┐рд░рд┐рдХреНрдд рд▓рд╛рдЧрдд рднреА рдирд╣реАрдВ рд╣реИред

рдЖрдорддреМрд░ рдкрд░, рдпрд╣ рдПрдХ рд╣реА рд░реВрдо рдореЗрдВ рд▓рдЧрднрдЧ 15-20 рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдареАрдХ рдХрд╛рдо рдХрд░реЗрдЧрд╛ред рдПрдХ рдмрд╛рд░ рдЬрдм рдЖрдкрдХрд╛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдкрд░рд┐рдкрдХреНрд╡ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЖрдк рдЕрдкрдирд╛ рд╕реНрд╡рдпрдВ рдХрд╛ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рд░реНрд╡рд░ рд╣реЛрд╕реНрдЯ рдХрд░рдХреЗ рдПрдХ рдмрдбрд╝реЗ/рдмреЗрд╣рддрд░/рдордЬрдмреВрдд рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рдорд╛рдзрд╛рди рдореЗрдВ рдЕрдкрдЧреНрд░реЗрдб рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

## рдЕрдкрдирд╛ рдЦреБрдж рдХрд╛ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рд░реНрд╡рд░ рд╣реЛрд╕реНрдЯ рдХрд░рдирд╛

рдЖрдк рдмрдбрд╝реЗ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдХреЗ рд▓рд┐рдП рдпрд╛ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдФрд░ рдЗрдореНрдкреНрд▓реАрдореЗрдВрдЯреЗрд╢рди рдкрд░ рдЕрдзрд┐рдХ рдирд┐рдпрдВрддреНрд░рдг рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдирд╛ рд╕реНрд╡рдпрдВ рдХрд╛ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рд░реНрд╡рд░ рд╣реЛрд╕реНрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣ рд╕рдХрддреЗ рд╣реИрдВред

рд╣рдорд╛рд░рд╛ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рд░реНрд╡рд░ [own networking package](https://fwd.needle.tools/needle-engine/packages/needle-engine-networking) рдХреЗ рд░реВрдк рдореЗрдВ NPM рдкрд░ Node.js рдкреИрдХреЗрдЬ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрд▓рдмреНрдз рд╣реИред рдкреИрдХреЗрдЬ рдореЗрдВ рд▓реЛрдХрдкреНрд░рд┐рдп рд╡реЗрдм рдлреНрд░реЗрдорд╡рд░реНрдХ [Fastify](https://www.npmjs.com/package/fastify) рдФрд░ [Express](https://www.npmjs.com/package/express) рдХреЗ рд▓рд┐рдП рдкреНрд░реА-рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдП рдЧрдП рдЗрдВрдЯреАрдЧреНрд░реЗрд╢рди рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдФрд░ рдЗрд╕реЗ рдЕрдиреНрдп Node.js рд╕рд░реНрд╡рд░ рдлреНрд░реЗрдорд╡рд░реНрдХ рдореЗрдВ рднреА рдЗрдВрдЯреАрдЧреНрд░реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

::: tip For quick experiments: Remix on Glitch
рдЖрдк рдЗрд╕ рдкреЗрдЬ рд╕реЗ Glitch рдкрд░ рдЪрд▓ рд░рд╣реЗ рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рд░реНрд╡рд░ рдХреЛ рд░реАрдорд┐рдХреНрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: [needle-networking.glitch.me](https://needle-networking.glitch.me/) рдмреЙрдЯрдо рд░рд╛рдЗрдЯ рдХреЙрд░реНрдирд░ рдореЗрдВ рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рдХреЗред

рдбрд┐рдлрд╝реЙрд▓реНрдЯ Glitch рд╕рд░реНрд╡рд░ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдЫреЛрдЯрд╛ рд╣реИ рдФрд░ рдХреЗрд╡рд▓ рд╕реАрдорд┐рдд рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд╕рдВрднрд╛рд▓ рд╕рдХрддрд╛ рд╣реИред рдпрджрд┐ рдЖрдк рдЕрдкрдиреА рд╕реАрди рдореЗрдВ рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ 15-20 рд╕реЗ рдЕрдзрд┐рдХ рд▓реЛрдЧреЛрдВ рдХреА рдЙрдореНрдореАрдж рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдЕрдкрдирд╛ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рд░реНрд╡рд░ рдХрд╣реАрдВ рдФрд░ рд╣реЛрд╕реНрдЯ рдХрд░рдиреЗ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП (рдЬреИрд╕реЗ рдХрд┐ Google Cloud рдпрд╛ AWS рдкрд░)ред
:::

::::code-group
:::code-group-item Fastify
```js
import networking from "@needle-tools/needle-networking";
networking.startServerFastify(fastifyApp, { endpoint: "/socket" });
```
:::
:::code-group-item Express
```js
import networking from "@needle-tools/needle-networking";
networking.startServerExpress(expressApp, { endpoint: "/socket" });
```
:::
:::code-group-item Custom Integration
```js
import { init, onConnection } from "@needle-tools/networking";

// Add your framework-specific websocket implementation here. 
// You can view the fastify and express implementations in server.js for reference.
class WebsocketConnector {
    constructor(frameworkWebsocket) {
        // Your implementation.
    }
    on(event, callback) {
        // Your implementation. When receiving a message in the websocket connection, call the callback.
        // 'event' can be 'message' or 'close'.
    }
    send(key, value) {
        // Your implementation. Pass the message along to the websocket connection.
    }
}
const options = { endpoint: "/socket" };
init(options);
yourFramework.createWebsocketRoute(options.endpoint, frameworkWebsocket => {
    onConnection(new WebsocketConnector(frameworkWebsocket));
});
```
:::
::::

::: tip Example on Glitch.com
рджреЗрдЦреЗрдВ [glitch.com/edit/#!/needle-networking](https://glitch.com/edit/#!/needle-networking?path=server.js) рдкрд░ рдХреЛрдб рдПрдХ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдХрд┐ Needle Networking рдХреЛ Express рд╕рд░реНрд╡рд░ рдХреЗ рд╕рд╛рде рдХреИрд╕реЗ рдЗрдВрдЯреАрдЧреНрд░реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдПред
:::

### рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди

рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╡рд┐рдХрд▓реНрдк рдЙрдкрд▓рдмреНрдз рд╣реИрдВ:

| рд╡рд┐рдХрд▓реНрдк                      | рд╡рд┐рд╡рд░рдг                                                                                                 |
| :-------------------------- | :---------------------------------------------------------------------------------------------------- |
| `options.endpoint` *string* | рд╡реИрдХрд▓реНрдкрд┐рдХред рд░рд┐рд▓реЗрдЯрд┐рд╡ рд╕рд░реНрд╡рд░ рдПрдВрдбрдкреЙрдЗрдВрдЯред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, `/socket` `yourserver/socket` рдкрд░ рд╡реЗрдмрд╕реЙрдХреЗрдЯ рдПрдВрдбрдкреЙрдЗрдВрдЯ рд╢реБрд░реВ рдХрд░реЗрдЧрд╛ред рдбрд┐рдлрд╝реЙрд▓реНрдЯ `/` рд╣реИред |
| `options.maxUsers` *number* | рд╕рд░реНрд╡рд░ рдкрд░ рд╕рдорд╡рд░реНрддреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреА рдЕрдзрд┐рдХрддрдо рд╕рдВрдЦреНрдпрд╛ред рдбрд┐рдлрд╝реЙрд▓реНрдЯ `50` рд╣реИред                                            |
| `options.defaultUserTimeout` *number* | рд╕реЗрдХрдВрдб рдореЗрдВ рд╕рдордп рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред рдбрд┐рдлрд╝реЙрд▓реНрдЯ `30` рд╣реИред                        |
| `process.env.VIEW_ONLY_SALT` *string* | рд░реЗрдЧреБрд▓рд░ рд░реВрдо ID рд╕реЗ рдХреЗрд╡рд▓-рджреЗрдЦрдиреЗ рдпреЛрдЧреНрдп рд░реВрдо ID рдЬрдирд░реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рд╕реЙрд▓реНрдЯ рд╡реИрд▓реНрдпреВред рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдПрдХ рдкреВрд░реНрд╡рдирд┐рд░реНрдзрд╛рд░рд┐рдд рд╕реЙрд▓реНрдЯ рд╡реИрд▓реНрдпреВ рд╣реИред |
| `process.env.NEEDLE_NETWORKING_S3_*` *string* | S3 рд╕реНрдЯреЛрд░реЗрдЬ рд╕рдХреНрд╖рдо рдХрд░реЗрдВред рдЗрд╕рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рд╡реЗрд░рд┐рдПрдмрд▓ рдХреА рдкреВрд░реА рд╕реВрдЪреА рдиреАрдЪреЗ рджреЗрдЦреЗрдВред рдЬрдм рд╕реЗрдЯ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╕реНрдЯреЛрд░реЗрдЬ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдбрд┐рд╕реНрдХ рдкрд░ JSON рдлрд╝рд╛рдЗрд▓реЗрдВ)ред |

рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рд░реНрд╡рд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдХрдиреЗрдХреНрдЯ рдФрд░ рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рдХрд░рдирд╛, рдореИрд╕реЗрдЬ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдФрд░ рднреЗрдЬрдирд╛, рдФрд░ рд░реВрдо рд╕реНрдЯреЗрдЯ рдХреЛ рдкрд░реНрд╕рд┐рд╕реНрдЯ рдХрд░рдирд╛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░реЗрдЧрд╛ред

рдХрд╕реНрдЯрдо рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рд░реНрд╡рд░ рдХреЛ рдХрд╣реАрдВ рднреА рдбрд┐рдкреНрд▓реЙрдп рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП Google Cloud рдкрд░ред рдЖрдЧреЗ рдХреЗ рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЗ рд▓рд┐рдП рдХреГрдкрдпрд╛ рдЗрд╕ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЛ рджреЗрдЦреЗрдВ: [Local Needle Networking Server](https://fwd.needle.tools/needle-engine/local-networking-repository)

::: tip Different server locations for local and hosted development
рдпрджрд┐ рдЖрдк рдХрд╕реНрдЯрдо рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХреЛрдб рдкрд░ рдХрд╛рдо рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдЖрдк рд▓реЛрдХрд▓ рдбреЗрд╡рд▓рдкрдореЗрдВрдЯ рдФрд░ рд╣реЛрд╕реНрдЯреЗрдб рдРрдк рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕рд░реНрд╡рд░ рд╕реНрдерд╛рдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣ рд╕рдХрддреЗ рд╣реИрдВред рдЖрдк `Networking` рдХрдВрдкреЛрдиреЗрдВрдЯ рдореЗрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕рд░реНрд╡рд░ URL рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

![Needle Engine Networking component with networking server hosted elswhere](/imgs/networking_absolute.webp)
:::

#### рд╕реНрдЯреЗрдЯ рд╕реНрдЯреЛрд░реЗрдЬ

рдиреЗрдЯрд╡рд░реНрдХ рд╕реНрдЯреЗрдЯ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рд╕рд░реНрд╡рд░ рдкрд░ `/ .data` рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдореЗрдВ JSON рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд░реВрдк рдореЗрдВ рдбрд┐рд╕реНрдХ рдкрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реЛрддреА рд╣реИред рдкреНрд░рддреНрдпреЗрдХ рд░реВрдо рдХреА рдЕрдкрдиреА рдлрд╝рд╛рдЗрд▓ рд╣реЛрддреА рд╣реИ, рдФрд░ рд╕реНрдЯреЗрдЯ рдХреЛ рдХрдиреЗрдХреНрдЯрд┐рдВрдЧ рдХреНрд▓рд╛рдЗрдВрдЯреНрд╕ рдХреЛ рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрдм рд╡реЗ рдХрд┐рд╕реА рд░реВрдо рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрддреЗ рд╣реИрдВред

рд╡реИрдХрд▓реНрдкрд┐рдХ рд░реВрдк рд╕реЗ, рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕реНрдЯреЗрдЯ рдХреЛ S3 рдХрдореНрдкреИрдЯрд┐рдмрд▓ рд╕реНрдЯреЛрд░реЗрдЬ рдкреНрд░реЛрд╡рд╛рдЗрдбрд░ рдХреЗ рд╕рд╛рде рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред S3 рд╕реНрдЯреЛрд░реЗрдЬ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рд╡реЗрд░рд┐рдПрдмрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ:

```bash
NEEDLE_NETWORKING_S3_ENDPOINT=
NEEDLE_NETWORKING_S3_REGION=
NEEDLE_NETWORKING_S3_BUCKET=
NEEDLE_NETWORKING_S3_ACCESS_KEY_ID=
NEEDLE_NETWORKING_S3_ACCESS_KEY=
NEEDLE_NETWORKING_S3_PREFIX= # bucket рдореЗрдВ рд╕рд╣реЗрдЬреЗ рдЧрдП рд╕рднреА рд╕реНрдЯреЗрдЯ рдЗрд╕ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЗ рд╕рд╛рде рдкреНрд░реАрдлрд╝рд┐рдХреНрд╕ рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗред рдпрд╣ рдПрдХ рдкрд╛рде рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдЬреИрд╕реЗ `my_state/` рдпрд╛ рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп рдЖрдИрдбреА `server_123_`
```

## рд▓реЛрдХрд▓ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рд░реНрд╡рд░

рдкрд░реАрдХреНрд╖рдг рдФрд░ рдбреЗрд╡рд▓рдкрдореЗрдВрдЯ рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП, рдЖрдк Needle Engine рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдкреИрдХреЗрдЬ рдХреЛ рд▓реЛрдХрд▓ рд╕рд░реНрд╡рд░ рдкрд░ рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВред рд╣рдордиреЗ рдПрдХ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рддреИрдпрд╛рд░ рдХреА рд╣реИ рдЬреЛ рд╡реЗрдмрд╕реЙрдХреЗрдЯ рдкреИрдХреЗрдЬ рдХреЛ рд╣реЛрд╕реНрдЯ рдХрд░рдиреЗ рдФрд░ рдЖрдкрдХреЗ рд▓рд┐рдП рдЗрд╕реЗ рдЖрд╕рд╛рди рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реЗрдЯ рдХреА рдЧрдИ рд╣реИред

1.  [github.com/needle-tools/networking-local](https://fwd.needle.tools/needle-engine/local-networking-repository) рд╕реЗ рд▓реЛрдХрд▓ рд╕рд░реНрд╡рд░ рд╕реИрдВрдкрд▓ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ
2.  рд╕рд░реНрд╡рд░ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП README рдореЗрдВ рджрд┐рдП рдЧрдП рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВред рд╕рд░реНрд╡рд░ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ `wss://localhost:9001/socket` рдкрд░ рдЪрд▓реЗрдЧрд╛ред
3.  рдЕрдкрдиреА рд╕реАрди рдореЗрдВ `Networking` рдХрдВрдкреЛрдиреЗрдВрдЯ рдЬреЛрдбрд╝реЗрдВред
4.  `Networking` рдХрдВрдкреЛрдиреЗрдВрдЯ рдкрд░ `Localhost` рдлрд╝реАрд▓реНрдб рдореЗрдВ рд▓реЛрдХрд▓ рд╕рд░реНрд╡рд░ рдПрдбреНрд░реЗрд╕ рдкреЗрд╕реНрдЯ рдХрд░реЗрдВред

## рдЙрдиреНрдирдд: peer.js рдХреЗ рд▓рд┐рдП WebRTC рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдХрд╕реНрдЯрдорд╛рдЗрдЬрд╝ рдХрд░рдирд╛

Needle Engine `Screencapture` (рд╕реНрдХреНрд░реАрдирд╢реЗрдпрд░рд┐рдВрдЧ) рдФрд░ `VoIP` (рд╡реЙрдпрд╕ рдХрдореНрдпреБрдирд┐рдХреЗрд╢рди) рдХрдВрдкреЛрдиреЗрдВрдЯ рдСрдбрд┐рдпреЛ рдФрд░ рд╡реАрдбрд┐рдпреЛ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП [peer.js](https://peerjs.com/) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред Peer.js рдмреИрдХрдЧреНрд░рд╛рдЙрдВрдб рдореЗрдВ WebRTC рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред

Needle Engine peerjs рдХреЗ рд▓рд┐рдП рдЙрдЪрд┐рдд рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред рдпрджрд┐ рдЖрдк рдЙрди рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк
```ts
setPeerOptions(opts: PeerjsOptions);
```
рдЕрдкрдиреЗ рдХрд╕реНрдЯрдо рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЗ рд╕рд╛рде рдХреЙрд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ ICE/STUN/TURN рд╕рд░реНрд╡рд░ рдХреЗ рд▓рд┐рдП рд╣реЛрд╕реНрдЯрд┐рдВрдЧ рдкреНрд░реЛрд╡рд╛рдЗрдбрд░ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдЬрдм рдЖрдк рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ WebRTC рд╕рд░реНрд╡рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред

## рдЙрдиреНрдирдд: рд╕рд░реНрд╡рд░ рдФрд░ рдХреНрд▓рд╛рдЗрдВрдЯ рдореИрд╕реЗрдЬ рдлреЙрд░реНрдореЗрдЯ

::: warning рдХреЗрд╡рд▓ рд╕реВрдЪрдирд╛рддреНрдордХ рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдПред рдЗрд╕рдХреЗ рдмрдЬрд╛рдп Needle Engine рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд╛рди рдХрд┐рдП рдЧрдП API рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред
рдЖрдорддреМрд░ рдкрд░, рдЖрдкрдХреЛ рдЗрди рдореИрд╕реЗрдЬ рдлреЙрд░реНрдореЗрдЯ рдХреЗ рд╕рд╛рде рд╕реАрдзреЗ рдЗрдВрдЯрд░реИрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд▓реЛ-рд▓реЗрд╡рд▓ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ API рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдореИрд╕реЗрдЬ рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░рдиреЗ рдФрд░ рдЖрдкрдХреЛ рд╕рд╣реА рдкреНрд░рдХрд╛рд░ рджреЗрдиреЗ рдХреЛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИред рдпрд╣рд╛рдВ рджреА рдЧрдИ рдЬрд╛рдирдХрд╛рд░реА рдЙрдиреНрдирдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд╣реИ рдЬреЛ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдореИрд╕реЗрдЬ рдлреЙрд░реНрдореЗрдЯ рдХреЛ рд╕рдордЭрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рдорд╛рдзрд╛рдиреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред
:::

рдореИрд╕реЗрдЬ JSON рдлреЙрд░реНрдореЗрдЯ рдореЗрдВ рднреЗрдЬреЗ рдЬрд╛рддреЗ рд╣реИрдВред рдЙрдирдХреЗ рдкрд╛рд╕ рд╣рдореЗрд╢рд╛ рдПрдХ `key` рдлрд╝реАрд▓реНрдб рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдореИрд╕реЗрдЬ рдХреЗ рдкреНрд░рдХрд╛рд░ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдПрдХ `data` рдлрд╝реАрд▓реНрдб рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдореИрд╕реЗрдЬ рдкреЗрд▓реЛрдб рд╣реЛрддрд╛ рд╣реИред `data` рдлрд╝реАрд▓реНрдб рдХреЛрдИ рднреА JSON-рд╕реАрд░реАрд▓рд╛рдЗрдЬрд╝реЗрдмрд▓ рдСрдмреНрдЬреЗрдХреНрдЯ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред

### рдмрд┐рд▓реНрдЯ-рдЗрди рд░реВрдо рдЗрд╡реЗрдВрдЯреНрд╕

::::code-group
:::code-group-item Join
```json
// Sent to the server to attempt joining a room.
{
    "key": "join-room",
    "data": {
        "room": string,
        "viewOnly": boolean,
    }
}
```
:::
:::code-group-item Leave
```json
// Sent to the server to leave a room.
{
    "key": "leave-room",
    "data": {
        "room": string
    }
}
```
:::
:::code-group-item JoinedRoom
```json
// Sent to the client when the local user has joined a room.
// Type: JoinedRoomResponse
{
    "key": "joined-room",
    "room": string,
    "viewId": string,
    "allowEditing": boolean,
    "inRoom": string[] // connection IDs
}
```
:::
:::code-group-item LeftRoom
```json
// Sent to the client when the local user has left a room.
// Type: LeftRoomResponse
{
    "key": "left-room",
    "room": string
}
```
:::
:::code-group-item UserJoinedRoom
```json
// Sent to the client when any user has joined a room.
// Type: UserJoinedOrLeftRoomModel
{
    "key": "user-joined-room",
    "data": {
        "userId": string // connection ID
    }
}
```
:::
:::code-group-item UserLeftRoom
```json
// Sent to the client when any user has left a room.
// Type: UserJoinedOrLeftRoomModel
{
    "key": "user-left-room",
    "data": {
        "userId": string // connection ID
    }
}
````
:::
:::code-group-item RoomStateSent
```json
// Sent to the client after the complete room state has been sent.
{
    "key": "room-state-sent",
    "room": string // room name 
}
```
:::
::::

### рдмрд┐рд▓реНрдЯ-рдЗрди рдпреВрдЯрд┐рд▓рд┐рдЯреА рдЗрд╡реЗрдВрдЯреНрд╕

::::code-group
:::code-group-item ConnectionInfo
```json
// Sent to the client when the connection is established.
{
    "key": "connection-start-info",
    "data": {
        "id": string // connection ID
    }
}
```
:::
:::code-group-item syncInstantiate
```json
// Used by the syncInstantiate() API to create a new instance of an asset.
// Type: NewInstanceModel
{
    "key": "new-instance-created",
    "data": {
        "guid": string,
        "originalGuid": string,
        "seed": number | undefined,
        "visible": boolean | undefined,
        "dontSave": boolean | undefined,

        "parent": string | undefined,
        "position": { x: number, y: number, z: number } | undefined,
        "rotation": { x: number, y: number, z: number, w: number } | undefined,
        "scale": { x: number, y: number, z: number } | undefined,

        "deleteStateOnDisconnect": boolean | undefined
    }
```
:::
:::code-group-item syncDestroy
```json
// Used by the syncDestroy() API to destroy an instance of an asset.
// Type: DestroyInstanceModel
{
    "key": "instance-destroyed",
    "data": {
        "guid": string,
        "dontSave": boolean | undefined
    }
}
```
:::
:::code-group-item Ping
```json
// Sent to the server every few seconds to keep the connection alive.
{
    "key": "ping",
    "data": {}
}
```
:::
:::code-group-item Pong
```json
// Sent by the server in response to a ping.
{
    "key": "pong",
    "data": {}
}
```
:::
:::code-group-item DeleteState
```json
// Sent to the server to delete state for a specific guid.
{
    "key": "delete-state",
    "data": {
        "guid": <string>
    }
}
```
:::
:::code-group-item DeleteAllState
```json
// Sent to the server to delete ALL current room state.
{
    "key": "delete-all-state",
    "data": {}
}
```
::::

### рдмрд┐рд▓реНрдЯ-рдЗрди рдУрдирд░рд╢рд┐рдк рдЗрд╡реЗрдВрдЯреНрд╕

::::code-group
:::code-group-item OwnershipRequest
```json
{
    "key":
      "request-has-owner" |
      "request-ownership" |
      "remove-ownership",
    "data": {
        "guid": string
    }
}
```
:::
:::code-group-item OwnershipResponse
// Type: OwnershipResponse
```json
{
    "key":
      "response-has-owner",
    "data": {
        "guid": string,
        "value": boolean
    }
}
```
:::
::: code-group-item OwnershipBroadcastResponse
```json
{
    "key":
      "gained-ownership" |
      "lost-ownership" |
      "gained-ownership-broadcast" |
      "lost-ownership-broadcast",
    "data": {
        "guid": string,
        "owner": string
    }
}
```
:::
::::

### рдмрд┐рд▓реНрдЯ-рдЗрди рдлреНрд▓реИрдЯрдмрдлрд╝рд░ рд╕реНрдХреАрдорд╛

рдлреНрд▓реИрдЯрдмрдлрд╝рд░ рдореИрд╕реЗрдЬ рд╕реАрдзреЗ рдмрд╛рдЗрдирд░реА рдореИрд╕реЗрдЬ рдХреЗ рд░реВрдк рдореЗрдВ рднреЗрдЬреЗ рдЬрд╛рддреЗ рд╣реИрдВред

::::code-group
:::code-group-item SyncedTransform ('STRS')
```cs
<!-- SAMPLE node_modules/@needle-tools/engine/src/engine-schemes/transforms.fbs -->
```
:::
:::code-group-item SyncedCamera ('SCAM')
```cs
<!-- SAMPLE node_modules/@needle-tools/engine/src/engine-schemes/syncedCamera.fbs -->
```
:::
:::code-group-item Vec2|3|4
```cs
<!-- SAMPLE node_modules/@needle-tools/engine/src/engine-schemes/vec.fbs -->
```
:::
::::

## рдЙрдиреНрдирдд: рдлреНрд▓реИрдЯрдмрдлрд╝рд░ рдлреЙрд░реНрдореЗрдЯ рдореЗрдВ рдмрд╛рдЗрдирд░реА рдореИрд╕реЗрдЬ

JSON рдореИрд╕реЗрдЬ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдФрд░ рд╕рдордЭрдиреЗ рдореЗрдВ рдЖрд╕рд╛рди рд╣реЛрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЖрдорддреМрд░ рдкрд░ рдореЗрдореЛрд░реА рдФрд░ рдмреИрдВрдбрд╡рд┐рдбреНрде рдореЗрдВ рдмрдбрд╝реЗ рд╣реЛрддреЗ рд╣реИрдВред рдмрдбрд╝реА рдорд╛рддреНрд░рд╛ рдореЗрдВ рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП, рдпрд╛ рддреЗрдЬрд╝ рдЕрдкрдбреЗрдЯ рднреЗрдЬрддреЗ рд╕рдордп, рдмрд╛рдЗрдирд░реА рдореИрд╕реЗрдЬ рддреЗрдЬрд╝ рдФрд░ рдЕрдзрд┐рдХ рдХреБрд╢рд▓ рд╣реЛрддреЗ рд╣реИрдВред рдЬрд╣рд╛рдВ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ, рдЖрдк Needle Engine рдореЗрдВ рдлреНрд▓реИрдЯрдмрдлрд╝рд░ рдореИрд╕реЗрдЬ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдлреНрд▓реИрдЯрдмрдлрд╝рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрддрд┐рд░рд┐рдХреНрдд рд╕реЗрдЯрдЕрдк рдЪрд░рдгреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рдЬреИрд╕реЗ рдореИрд╕реЗрдЬ рд╕реНрдХреАрдорд╛ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдирд╛ рдФрд░ рдХрдореНрдкрд╛рдЗрд▓ рдХрд░рдирд╛, рдФрд░ рдбреАрдмрдЧ рдХрд░рдирд╛ рдХрдард┐рди рд╣реЛрддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЖрдк рдмрд╛рдЗрдирд░реА рдореИрд╕реЗрдЬ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░ рд░рд╣реЗ рд╣реЛрддреЗ рд╣реИрдВред

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдлреНрд▓реИрдЯрдмрдлрд╝рд░ рдореИрд╕реЗрдЬ рднреЗрдЬрддреЗ рдФрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╕рдордп, рдХреЛрдИ `key` рдлрд╝реАрд▓реНрдб рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ - рдореИрд╕реЗрдЬ рдкреНрд░рдХрд╛рд░ рдлреНрд▓реИрдЯрдмрдлрд╝рд░ рд╕реНрдХреАрдорд╛ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реЛрддрд╛ рд╣реИред рдЖрдк рд╡реЗрдмрд╕реЙрдХреЗрдЯ рдХрдиреЗрдХреНрд╢рди рдкрд░ рдЬреЛ рднреЗрдЬрддреЗ рдФрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ, рд╡рд╣ рдПрдХ рд╕рд┐рдВрдЧрд▓ рдмрд╛рдЗрдирд░реА рдмрдлрд╝рд░ рд╣реЛрддрд╛ рд╣реИред

рдПрдХ рд╣реА рд░реВрдо рдореЗрдВ рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдПрдХ рдмрд╛рдЗрдирд░реА рдореИрд╕реЗрдЬ рднреЗрдЬреЗрдВ:
```ts
this.context.connection.sendBinary(byteArray: Uint8Array);
```

рдлреНрд▓реИрдЯрдмрдлрд╝рд░ рдлреЙрд░реНрдореЗрдЯ рдореЗрдВ рдмрд╛рдЗрдирд░реА рдореИрд╕реЗрдЬ рдХреА рд╕рджрд╕реНрдпрддрд╛ рд▓реЗрдВ:
```ts
this.context.connection.beginListenBinary(identifier:string, callback:(data : ByteBuffer) => void);
```

рдмрд╛рдЗрдирд░реА рдореИрд╕реЗрдЬ рд╕реЗ рд╕рджрд╕реНрдпрддрд╛ рд░рджреНрдж рдХрд░реЗрдВ:
```ts
this.context.connection.stopListenBinary(identifier:string);
```

#### рдлреНрд▓реИрдЯрдмрдлрд╝рд░ рд╕реИрдВрдкрд▓ рдХреЛрдб

рдлреНрд▓реИрдЯрдмрдлрд╝рд░ рдореИрд╕реЗрдЬ рднреЗрдЬрдиреЗ рдФрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рдЖрдкрдХреЛ рдПрдХ рд╕реНрдХреАрдорд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рдФрд░ рдЙрд╕реЗ TypeScript рдореЗрдВ рдХрдореНрдкрд╛рдЗрд▓ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред рдлрд┐рд░, рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд╕рд╛рде рд╕реНрдХреАрдорд╛ рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд░реЗрдВ рдФрд░ рдореИрд╕реЗрдЬ рдмрдирд╛рдиреЗ рдФрд░ рдкрд╛рд░реНрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрдирд░реЗрдЯ рдХрд┐рдП рдЧрдП рд╕реНрдХреАрдорд╛ рдореЗрдердб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред

- [Needle Engine рдореЗрдВ рдмрд┐рд▓реНрдЯ-рдЗрди рдлреНрд▓реИрдЯрдмрдлрд╝рд░ рд╕реНрдХреАрдорд╛](#built-in-flatbuffer-schemas)
- [рдПрдХ рд╕реНрдХреАрдорд╛ рдЬрдирд░реЗрдЯ рдХрд░рдирд╛](https://google.github.io/flatbuffers/flatbuffers_guide_writing_schema.html)
- [рд╕реНрдХреАрдорд╛ рдХрдореНрдкрд╛рдЗрд▓рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛](https://google.github.io/flatbuffers/flatbuffers_guide_using_schema_compiler.html)
- [Typescript рдореЗрдВ рдлреНрд▓реИрдЯрдмрдлрд╝рд░](https://google.github.io/flatbuffers/flatbuffers_guide_use_typescript.html)

::::code-group
:::code-group-item Register a schema
```ts
// Register a new Flatbuffer schema with the networking system
import { registerBinaryType } from '@needle-tools/engine';
import { MyDataModel } from 'my-data-model.js';

const MySchemaIdentifier = "MYSC";

registerBinaryType(MySchemaIdentifier, MyDataModel.getRootAsSyncedTransformModel);
```
:::
:::code-group-item Send Messages
```ts
// Prepare data for sending by creating a Flatbuffer message:
import { MyDataModel } from 'my-data-model.js';

const MySchemaIdentifier = "MYSC";
const builder = new flatbuffers.Builder();

// Construct a Flatbuffer message
function createMyCustomModel(somePayload: string): Uint8Array {
    builder.clear();
    MyDataModel.startMyDataModel(builder);    
    const guidObj = builder.createString(guid);
    MyDataModel.addSomePayload(builder, guidObj);
    const res = MyDataModel.endMyDataModel(builder);
    builder.finish(res, MySchemaIdentifier);
    return builder.asUint8Array();
}

// Send the data
function sendData() {
    const data = createMyCustomModel("your-payload", this, true);
    this.context.connection.sendBinary(data);
}
```
:::
:::code-group-item Receive Messages
```ts
// Subscribe to receive this specific message type:
import { MyDataModel } from 'my-data-model.js';

const MySchemaIdentifier = "MYSC";

this.context.connection.beginListenBinary(MySchemaIdentifier, (data) => {
    const model = MyDataModel.getRootAsMyDataModel(data);
    console.log("Received binary message", model, model.somePayload());
});
```
:::
::::

::: tip Custom Flatbuffer messages and persistence
рд╡рд░реНрддрдорд╛рди рдореЗрдВ, рдХрд╕реНрдЯрдо рдмрд╛рдЗрдирд░реА рдореИрд╕реЗрдЬ рдХреЛ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рд░реНрд╡рд░ рдкрд░ рдкрд░реНрд╕рд┐рд╕реНрдЯ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рд░реНрд╡рд░ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░реЗрдВ рдФрд░ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ рдХрд╕реНрдЯрдо рдлреНрд▓реИрдЯрдмрдлрд╝рд░ рд╕реНрдХреАрдорд╛ рдЬреЛрдбрд╝реЗрдВ рдХрд┐ guid рдкреНрд░реЙрдкрд░реНрдЯреА рдХреЛ рдкреНрд░реЛрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред
:::

## рд╕рд╛рд░рд╛рдВрд╢

Needle Engine рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХреЗ рдЬрдЯрд┐рд▓ рд╡рд┐рд╖рдп рдХреЛ рд╕реБрд▓рдн рдФрд░ рдЙрдкрдпреЛрдЧ рдореЗрдВ рдЖрд╕рд╛рди рдмрдирд╛рддрд╛ рд╣реИред рдЖрдк рдЕрдкрдиреЗ рдХрдВрдкреЛрдиреЗрдВрдЯ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рд╣реА рд▓рд╛рдЗрдиреЛрдВ рдХреЗ рдХреЛрдб рдХреЗ рд╕рд╛рде рдСрдЯреЛрдореИрдЯрд┐рдХ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдЬрдм рдЖрдкрдХреЛ рдЕрдзрд┐рдХ рдирд┐рдпрдВрддреНрд░рдг рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ рддреЛ рдЖрдк рдореИрдиреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдореЗрдВ рдЧрд╣рд░рд╛рдИ рд╕реЗ рдЙрддрд░ рд╕рдХрддреЗ рд╣реИрдВред

---
рдкреЗрдЬ рдХрд╛ рдЕрдиреБрд╡рд╛рдж AI рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред