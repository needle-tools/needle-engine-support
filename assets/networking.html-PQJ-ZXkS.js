import{_ as s}from"./networking_absolute-L6C0VsVT.js";import{_ as n,c as a,e as t,o as h}from"./app-9T6lAodh.js";const l={};function k(e,i){return h(),a("div",null,i[0]||(i[0]=[t(`<h1 id="k-t-n-i-m-ng" tabindex="-1"><a class="header-anchor" href="#k-t-n-i-m-ng"><span>Káº¿t ná»‘i máº¡ng</span></a></h1><p>Needle Engine bao gá»“m má»™t giáº£i phÃ¡p káº¿t ná»‘i máº¡ng Ä‘áº§y Ä‘á»§ cho cÃ¡c tráº£i nghiá»‡m nhiá»u ngÆ°á»i chÆ¡i. Tráº¡ng thÃ¡i tháº¿ giá»›i Ä‘Æ°á»£c chia sáº», trÃ² chuyá»‡n thoáº¡i, tÃ­nh bá»n vá»¯ng cá»§a phiÃªn lÃ m viá»‡c vÃ  nhiá»u hÆ¡n ná»¯a cÃ³ thá»ƒ Ä‘áº¡t Ä‘Æ°á»£c vá»›i cÃ¡c component vÃ  API káº¿t ná»‘i máº¡ng cá»§a chÃºng tÃ´i. Báº¡n cÃ³ thá»ƒ káº¿t ná»‘i máº¡ng cÃ¡c component cá»§a riÃªng mÃ¬nh vá»›i lá»±a chá»n káº¿t ná»‘i máº¡ng tá»± Ä‘á»™ng hoáº·c thá»§ cÃ´ng.</p><p>Káº¿t ná»‘i máº¡ng trong Needle Engine dá»±a trÃªn <a href="https://github.com/jjxxs/websocket-ts" target="_blank" rel="noopener noreferrer">Websockets</a>. Káº¿t ná»‘i máº¡ng tá»± Ä‘á»™ng sá»­ dá»¥ng dá»¯ liá»‡u JSON Ä‘á»ƒ dá»… sá»­ dá»¥ng. Äá»‘i vá»›i cÃ¡c trÆ°á»ng há»£p sá»­ dá»¥ng phá»©c táº¡p vÃ  yÃªu cáº§u hiá»‡u suáº¥t cao, chÃºng tÃ´i sá»­ dá»¥ng <a href="https://google.github.io/flatbuffers/" target="_blank" rel="noopener noreferrer">Flatbuffers</a>.</p><p>Truy cáº­p chá»©c nÄƒng káº¿t ná»‘i máº¡ng cá»‘t lÃµi cÃ³ thá»ƒ Ä‘áº¡t Ä‘Æ°á»£c báº±ng cÃ¡ch sá»­ dá»¥ng <code>this.context.connection</code> tá»« má»™t component. MÃ¡y chá»§ backend máº·c Ä‘á»‹nh káº¿t ná»‘i ngÆ°á»i dÃ¹ng vÃ o cÃ¡c phÃ²ng (rooms). NgÆ°á»i dÃ¹ng trong cÃ¹ng má»™t phÃ²ng sáº½ chia sáº» tráº¡ng thÃ¡i vÃ  nháº­n tin nháº¯n tá»« nhau.</p><h2 id="kh-i-ni-m-k-t-n-i-m-ng" tabindex="-1"><a class="header-anchor" href="#kh-i-ni-m-k-t-n-i-m-ng"><span>KhÃ¡i niá»‡m káº¿t ná»‘i máº¡ng</span></a></h2><h3 id="ph-ng-v-tr-ng-th-i" tabindex="-1"><a class="header-anchor" href="#ph-ng-v-tr-ng-th-i"><span>PhÃ²ng vÃ  Tráº¡ng thÃ¡i</span></a></h3><p>Cá»‘t lÃµi cá»§a káº¿t ná»‘i máº¡ng trong Needle Engine lÃ  khÃ¡i niá»‡m vá» cÃ¡c phÃ²ng Ä‘Æ°á»£c Ä‘á»“ng bá»™ hÃ³a (synchronized rooms). Má»—i phÃ²ng cÃ³ má»™t ID vÃ  ngÆ°á»i dÃ¹ng káº¿t ná»‘i Ä‘áº¿n má»™t phÃ²ng báº±ng cÃ¡ch cung cáº¥p ID nÃ y. CÃ¡c phÃ²ng Ä‘Æ°á»£c lÆ°u trá»¯ trÃªn mÃ¡y chá»§ vÃ  ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ tham gia vÃ  rá»i phÃ²ng báº¥t cá»© lÃºc nÃ o. Khi ngÆ°á»i dÃ¹ng tham gia má»™t phÃ²ng, há» nháº­n Ä‘Æ°á»£c tráº¡ng thÃ¡i hiá»‡n táº¡i cá»§a phÃ²ng, Ã¡p dá»¥ng tráº¡ng thÃ¡i hiá»‡n táº¡i Ä‘Ã³ vÃ o cáº£nh cá»§a há» vÃ  sau Ä‘Ã³ láº¯ng nghe cÃ¡c thay Ä‘á»•i Ä‘á»‘i vá»›i tráº¡ng thÃ¡i phÃ²ng. Khi ngÆ°á»i dÃ¹ng rá»i phÃ²ng, há» ngá»«ng láº¯ng nghe cÃ¡c thay Ä‘á»•i Ä‘á»‘i vá»›i tráº¡ng thÃ¡i phÃ²ng.</p><p>Tráº¡ng thÃ¡i phÃ²ng Ä‘Æ°á»£c lÆ°u trá»¯ dÆ°á»›i dáº¡ng dá»¯ liá»‡u JSON trÃªn mÃ¡y chá»§, vÃ¬ váº­y táº¥t cáº£ cÃ¡c thay Ä‘á»•i Ä‘á»u cÃ³ tÃ­nh bá»n vá»¯ng. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  tráº¡ng thÃ¡i phÃ²ng khÃ´ng chá»‰ há»¯u Ã­ch cho káº¿t ná»‘i máº¡ng mÃ  cÃ²n Ä‘á»ƒ duy trÃ¬ hÃ nh Ä‘á»™ng cá»§a má»™t ngÆ°á»i dÃ¹ng duy nháº¥t.</p><p>Needle cÃ³ thá»ƒ cung cáº¥p <em>ID chá»‰ xem</em> cho cÃ¡c phÃ²ng. Khi truy cáº­p má»™t phÃ²ng báº±ng ID chá»‰ xem, ngÆ°á»i dÃ¹ng sáº½ khÃ´ng thá»ƒ tÆ°Æ¡ng tÃ¡c vá»›i phÃ²ng, nhÆ°ng sáº½ cÃ³ thá»ƒ xem tráº¡ng thÃ¡i hiá»‡n táº¡i vÃ  nháº­n cÃ¡c cáº­p nháº­t trá»±c tiáº¿p. Äiá»u nÃ y há»¯u Ã­ch cho cÃ¡c bÃ i thuyáº¿t trÃ¬nh hoáº·c trÃ¬nh diá»…n.</p><h3 id="quy-n-s-h-u" tabindex="-1"><a class="header-anchor" href="#quy-n-s-h-u"><span>Quyá»n sá»Ÿ há»¯u</span></a></h3><p>CÃ¡c Ä‘á»‘i tÆ°á»£ng trong má»™t phÃ²ng cÃ³ thá»ƒ Ä‘Æ°á»£c <em>sá»Ÿ há»¯u</em> bá»Ÿi má»™t ngÆ°á»i dÃ¹ng. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  chá»‰ chá»§ sá»Ÿ há»¯u cá»§a má»™t Ä‘á»‘i tÆ°á»£ng má»›i cÃ³ thá»ƒ thay Ä‘á»•i tráº¡ng thÃ¡i cá»§a nÃ³. Theo máº·c Ä‘á»‹nh, cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ´ng cÃ³ chá»§ sá»Ÿ há»¯u. CÃ¡c component nhÆ° <code>DragControls</code> sáº½ yÃªu cáº§u quyá»n sá»Ÿ há»¯u má»™t Ä‘á»‘i tÆ°á»£ng trÆ°á»›c khi thá»±c sá»± di chuyá»ƒn nÃ³. Trong cÃ¡c component tÃ¹y chá»‰nh, báº¡n cÃ³ thá»ƒ kiá»ƒm soÃ¡t cÃ¡ch xá»­ lÃ½ quyá»n sá»Ÿ há»¯u. CÃ³ thá»ƒ khÃ´ng yÃªu cáº§u quyá»n sá»Ÿ há»¯u, quyá»n sá»Ÿ há»¯u cÃ³ thá»ƒ Ä‘Æ°á»£c cho phÃ©p tá»± Ä‘á»™ng chuyá»ƒn giao cho ngÆ°á»i dÃ¹ng khÃ¡c, hoáº·c quyá»n sá»Ÿ há»¯u chá»‰ cÃ³ thá»ƒ Ä‘Æ°á»£c chuyá»ƒn giao báº±ng má»™t hÃ nh Ä‘á»™ng cá»¥ thá»ƒ.</p><p>Khi ngÆ°á»i dÃ¹ng rá»i phÃ²ng, cÃ¡c Ä‘á»‘i tÆ°á»£ng thuá»™c sá»Ÿ há»¯u cá»§a ngÆ°á»i dÃ¹ng Ä‘Ã³ sáº½ bá»‹ xÃ³a hoáº·c quyá»n sá»Ÿ há»¯u sáº½ Ä‘Æ°á»£c Ä‘áº·t láº¡i, tÃ¹y thuá»™c vÃ o cÃ¡ch Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c táº¡o.</p><h2 id="k-ch-ho-t-k-t-n-i-m-ng-cho-d-n-c-a-b-n" tabindex="-1"><a class="header-anchor" href="#k-ch-ho-t-k-t-n-i-m-ng-cho-d-n-c-a-b-n"><span>KÃ­ch hoáº¡t káº¿t ná»‘i máº¡ng cho dá»± Ã¡n cá»§a báº¡n</span></a></h2><ol><li>ThÃªm component <code>SyncedRoom</code> vÃ o cáº£nh cá»§a báº¡n. Theo máº·c Ä‘á»‹nh, Ä‘iá»u nÃ y sáº½ sá»­ dá»¥ng háº¡ táº§ng káº¿t ná»‘i máº¡ng do Needle cung cáº¥p.</li><li>ThÃªm component <code>SyncedTransform</code> vÃ o má»™t Ä‘á»‘i tÆ°á»£ng mÃ  báº¡n muá»‘n Ä‘á»“ng bá»™ hÃ³a chuyá»ƒn Ä‘á»™ng cá»§a nÃ³ qua máº¡ng.</li><li>ThÃªm component <code>DragControls</code> vÃ o cÃ¹ng Ä‘á»‘i tÆ°á»£ng Ä‘Ã³.</li><li>Cháº¡y dá»± Ã¡n. Trong trÃ¬nh duyá»‡t, nháº¥p vÃ o &quot;Join Room&quot; vÃ  sao chÃ©p URL.</li><li>Má»Ÿ má»™t cá»­a sá»• trÃ¬nh duyá»‡t má»›i vÃ  dÃ¡n URL. BÃ¢y giá» báº¡n sáº½ tháº¥y cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng trong cáº£ hai cá»­a sá»•. Thá»­ kÃ©o Ä‘á»‘i tÆ°á»£ng trong má»™t cá»­a sá»• vÃ  xem nÃ³ di chuyá»ƒn trong cá»­a sá»• kia.</li></ol><p>Component <code>DragControls</code>, giá»‘ng nhÆ° nhiá»u component Needle khÃ¡c, cÃ³ há»— trá»£ káº¿t ná»‘i máº¡ng tÃ­ch há»£p sáºµn. Quyá»n sá»Ÿ há»¯u sáº½ Ä‘Æ°á»£c chuyá»ƒn giao cho ngÆ°á»i báº¯t Ä‘áº§u kÃ©o Ä‘á»‘i tÆ°á»£ng.</p><h2 id="c-c-component-t-ch-h-p-s-n-v-i-h-tr-k-t-n-i-m-ng" tabindex="-1"><a class="header-anchor" href="#c-c-component-t-ch-h-p-s-n-v-i-h-tr-k-t-n-i-m-ng"><span>CÃ¡c Component tÃ­ch há»£p sáºµn vá»›i há»— trá»£ káº¿t ná»‘i máº¡ng</span></a></h2><table><thead><tr><th style="text-align:left;">Component</th><th style="text-align:left;">MÃ´ táº£</th></tr></thead><tbody><tr><td style="text-align:left;"><code>SyncedRoom</code></td><td style="text-align:left;">Xá»­ lÃ½ káº¿t ná»‘i máº¡ng vÃ  káº¿t ná»‘i Ä‘áº¿n má»™t phÃ²ng.</td></tr><tr><td style="text-align:left;"><code>SyncedTransform</code></td><td style="text-align:left;">Xá»­ lÃ½ Ä‘á»“ng bá»™ hÃ³a transform.</td></tr><tr><td style="text-align:left;"><code>SyncedCamera</code></td><td style="text-align:left;">Táº¡o má»™t prefab cho báº¥t ká»³ ngÆ°á»i dÃ¹ng nÃ o káº¿t ná»‘i Ä‘áº¿n phÃ²ng, prefab nÃ y sáº½ theo dÃµi vá»‹ trÃ­ cá»§a há».</td></tr><tr><td style="text-align:left;"><code>VoIP</code></td><td style="text-align:left;">Xá»­ lÃ½ cÃ¡c káº¿t ná»‘i Ã¢m thanh voice-over-IP, truy cáº­p microphone, v.v. giá»¯a nhá»¯ng ngÆ°á»i dÃ¹ng.</td></tr><tr><td style="text-align:left;"><code>ScreenCapture</code></td><td style="text-align:left;">Xá»­ lÃ½ chia sáº» mÃ n hÃ¬nh qua API web.</td></tr><tr><td style="text-align:left;"><code>Networking</code></td><td style="text-align:left;">Sá»­ dá»¥ng Ä‘á»ƒ tÃ¹y chá»‰nh URL mÃ¡y chá»§ backend. CÅ©ng cho phÃ©p Ä‘áº·t mÃ¡y chá»§ cá»¥c bá»™ Ä‘á»ƒ phÃ¡t triá»ƒn.</td></tr><tr><td style="text-align:left;"><code>DragControls</code></td><td style="text-align:left;">Xá»­ lÃ½ kÃ©o Ä‘á»‘i tÆ°á»£ng. Quyá»n sá»Ÿ há»¯u sáº½ tá»± Ä‘á»™ng Ä‘Æ°á»£c chuyá»ƒn cho ngÆ°á»i dÃ¹ng cuá»‘i cÃ¹ng kÃ©o Ä‘á»‘i tÆ°á»£ng.</td></tr><tr><td style="text-align:left;"><code>Duplicatable</code></td><td style="text-align:left;">Xá»­ lÃ½ sao chÃ©p Ä‘á»‘i tÆ°á»£ng. CÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c sao chÃ©p sáº½ Ä‘Æ°á»£c táº¡o thá»ƒ hiá»‡n cho má»i ngÆ°á»i trong phÃ²ng.</td></tr><tr><td style="text-align:left;"><code>Deletable</code></td><td style="text-align:left;">Xá»­ lÃ½ xÃ³a Ä‘á»‘i tÆ°á»£ng. CÃ¡c thao tÃ¡c xÃ³a Ä‘Æ°á»£c Ä‘á»“ng bá»™ hÃ³a qua máº¡ng.</td></tr><tr><td style="text-align:left;"><code>DeleteBox</code></td><td style="text-align:left;">Xá»­ lÃ½ xÃ³a cÃ¡c Ä‘á»‘i tÆ°á»£ng cÃ³ component &quot;Deletable&quot; khi chÃºng Ä‘Æ°á»£c kÃ©o vÃ o má»™t vÃ¹ng há»™p.</td></tr><tr><td style="text-align:left;"><code>PlayerSync</code></td><td style="text-align:left;">Component máº¡nh máº½ giÃºp táº¡o thá»ƒ hiá»‡n má»™t Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ cho má»—i ngÆ°á»i chÆ¡i Ä‘Æ°á»£c káº¿t ná»‘i.</td></tr><tr><td style="text-align:left;"><code>PlayerState</code></td><td style="text-align:left;">ThÃªm component nÃ y vÃ o cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c gÃ¡n cho <code>PlayerSync</code>.</td></tr><tr><td style="text-align:left;"><code>PlayerColor</code></td><td style="text-align:left;">Component Ä‘Æ¡n giáº£n cho mÃ u sáº¯c riÃªng cá»§a ngÆ°á»i chÆ¡i. Má»—i ngÆ°á»i dÃ¹ng Ä‘Æ°á»£c gÃ¡n má»™t mÃ u ngáº«u nhiÃªn khi tham gia phÃ²ng. Component nÃ y gÃ¡n mÃ u Ä‘Ã³ cho váº­t liá»‡u chÃ­nh cá»§a Ä‘á»‘i tÆ°á»£ng.</td></tr><tr><td style="text-align:left;"><code>WebXR</code></td><td style="text-align:left;">Xá»­ lÃ½ Ä‘á»“ng bá»™ hÃ³a avatar ngÆ°á»i dÃ¹ng (tay vÃ  Ä‘áº§u).</td></tr></tbody></table><h2 id="k-t-n-i-m-ng-t-ng-cho-c-c-component-t-y-ch-nh" tabindex="-1"><a class="header-anchor" href="#k-t-n-i-m-ng-t-ng-cho-c-c-component-t-y-ch-nh"><span>Káº¿t ná»‘i máº¡ng tá»± Ä‘á»™ng cho cÃ¡c Component tÃ¹y chá»‰nh</span></a></h2><p>CÃ¡c trÆ°á»ng (fields) trong cÃ¡c component cá»§a riÃªng báº¡n cÃ³ thá»ƒ Ä‘Æ°á»£c káº¿t ná»‘i máº¡ng ráº¥t dá»… dÃ ng. CÃ¡c thay Ä‘á»•i Ä‘á»‘i vá»›i trÆ°á»ng sáº½ Ä‘Æ°á»£c tá»± Ä‘á»™ng phÃ¡t hiá»‡n vÃ  gá»­i Ä‘áº¿n táº¥t cáº£ ngÆ°á»i dÃ¹ng trong phÃ²ng. CÃ¡c thay Ä‘á»•i nÃ y cÅ©ng Ä‘Æ°á»£c duy trÃ¬ nhÆ° má»™t pháº§n cá»§a Tráº¡ng thÃ¡i PhÃ²ng, vÃ¬ váº­y ngÆ°á»i dÃ¹ng tham gia phÃ²ng sau nÃ y cÅ©ng sáº½ nháº­n Ä‘Æ°á»£c tráº¡ng thÃ¡i hiá»‡n táº¡i cá»§a trÆ°á»ng, Ä‘áº£m báº£o má»i ngÆ°á»i Ä‘á»u tháº¥y cÃ¹ng dá»¯ liá»‡u.</p><p>Äá»ƒ tá»± Ä‘á»™ng káº¿t ná»‘i máº¡ng má»™t trÆ°á»ng trong má»™t component, trang trÃ­ nÃ³ báº±ng decorator <code>@syncField()</code>:</p><p>::::code-group :::code-group-item Äá»“ng bá»™ hÃ³a má»™t sá»‘</p><div class="language-ts" data-highlighter="shiki" data-ext="ts" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">import</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> Behaviour</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> syncField</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> IPointerClickHandler </span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;"> from</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;@needle-tools/engine&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">export</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;"> class</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#E5C890;--shiki-dark-font-style:italic;"> SyncedNumber</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;"> extends</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#E5C890;--shiki-dark-font-style:italic;"> Behaviour</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;"> implements</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#E5C890;--shiki-dark-font-style:italic;"> IPointerClickHandler</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">    // Use \`@syncField\` to automatically network a field. </span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">    // You can optionally assign a method or method name to be called when the value changes.</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">    @syncField</span><span style="--shiki-light:#FE640B;--shiki-dark:#EF9F76;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">&quot;myValueChanged&quot;</span><span style="--shiki-light:#FE640B;--shiki-dark:#EF9F76;">)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    mySyncedValue</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">?:</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;"> number</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;"> =</span><span style="--shiki-light:#FE640B;--shiki-dark:#EF9F76;"> 1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    </span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">    private</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;"> myValueChanged</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">       console</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">log</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">&quot;My value changed&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;"> this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">mySyncedValue)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    </span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">    onPointerClick</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">       this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">mySyncedValue </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> Math</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">random</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><p>::: :::code-group-item Äá»“ng bá»™ hÃ³a mÃ u cá»§a Ä‘á»‘i tÆ°á»£ng</p><div class="language-ts" data-highlighter="shiki" data-ext="ts" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">import</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> Behaviour</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> IPointerClickHandler</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> PointerEventData</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> Renderer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> RoomEvents</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> delay</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> serializable</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> showBalloonMessage</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> syncField </span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;"> from</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;@needle-tools/engine&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">import</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> Color </span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;"> from</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;three&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">export</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;"> class</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#E5C890;--shiki-dark-font-style:italic;"> Networking_ClickToChangeColor</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;"> extends</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#E5C890;--shiki-dark-font-style:italic;"> Behaviour</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;"> implements</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#E5C890;--shiki-dark-font-style:italic;"> IPointerClickHandler</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">    // START MARKER network color change syncField</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">    /** syncField does automatically send a property value when it changes */</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">    @syncField</span><span style="--shiki-light:#FE640B;--shiki-dark:#EF9F76;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#E5C890;--shiki-dark-font-style:italic;">Networking_ClickToChangeColor</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#FE640B;--shiki-dark:#EF9F76;">prototype</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">onColorChanged</span><span style="--shiki-light:#FE640B;--shiki-dark:#EF9F76;">)</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">    @serializable</span><span style="--shiki-light:#FE640B;--shiki-dark:#EF9F76;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">Color</span><span style="--shiki-light:#FE640B;--shiki-dark:#EF9F76;">)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    color</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">!:</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#E5C890;--shiki-dark-font-style:italic;"> Color</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">    private</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;"> onColorChanged</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">        // syncField will network the color as a number, so we need to convert it back to a Color when we receive it</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">        if</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> (</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">typeof</span><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;"> this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">color </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">===</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;number&quot;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">)</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">            this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">color </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#CA9EE6;--shiki-dark-font-weight:bold;"> new</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;"> Color</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(</span><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">color)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">        this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">setColorToMaterials</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">    // END MARKER network color change syncField</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">    /** called when the object is clicked and does generate a random color */</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">    onPointerClick</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">(</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EA999C;--shiki-dark-font-style:italic;">_</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">:</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#E5C890;--shiki-dark-font-style:italic;"> PointerEventData</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">        const</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> randomColor </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#CA9EE6;--shiki-dark-font-weight:bold;"> new</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;"> Color</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(Math</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">random</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> Math</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">random</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> Math</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">random</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">())</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">        this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">color </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> randomColor</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">    onEnable</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">        this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">setColorToMaterials</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">    private</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;"> setColorToMaterials</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">        const</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> renderer </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;"> this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">gameObject</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">getComponent</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(Renderer)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">        if</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> (renderer) </span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">            for</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> (</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">let</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> i </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span><span style="--shiki-light:#FE640B;--shiki-dark:#EF9F76;"> 0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> i </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">&lt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> renderer</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">sharedMaterials</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">length</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> i</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">++</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">) </span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">                // we clone the material so that we don&#39;t change the original material</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">                // just for demonstration purposes, you can also change the original material</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">                const</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> mat </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> renderer</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">sharedMaterials[i]</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">?.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">clone</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">                renderer</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">sharedMaterials[i] </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> mat</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">                if</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> (mat </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">&amp;&amp;</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;color&quot;</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;"> in</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> mat)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">                    mat</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">color </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;"> this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">color</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">            }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        }</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">        else</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> console</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">warn</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">&quot;No renderer found&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;"> this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">gameObject)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><div class="sample-code-links"><a href="https://github.com/needle-tools/needle-engine-samples/blob/docs/code-marker/package/Runtime/_Shared/SampleScripts~/Networking.ts#L2" target="_blank"><img src="https://img.shields.io/badge/View on-GitHub-green?style=flat-square" alt="View on GitHub"></a></div><p>::: ::::</p><p>LÆ°u Ã½ ráº±ng syncField cÃ³ má»™t tham sá»‘ tÃ¹y chá»n Ä‘á»ƒ chá»‰ Ä‘á»‹nh má»™t phÆ°Æ¡ng thá»©c sáº½ Ä‘Æ°á»£c gá»i khi giÃ¡ trá»‹ thay Ä‘á»•i. PhÆ°Æ¡ng thá»©c nÃ y nÃªn Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong cÃ¹ng má»™t lá»›p.</p><div class="hint-container tip"><p class="hint-container-title">CÃ i Ä‘áº·t dá»± Ã¡n tÃ¹y chá»‰nh</p><p>Náº¿u báº¡n Ä‘ang sá»­ dá»¥ng cÃ i Ä‘áº·t dá»± Ã¡n tÃ¹y chá»‰nh, báº¡n cáº§n cÃ³ <code>experimentalDecorators: true</code> trong tá»‡p <code>tsconfig.json</code> cá»§a mÃ¬nh Ä‘á»ƒ decorator syncField hoáº¡t Ä‘á»™ng. CÃ¡c dá»± Ã¡n Ä‘Æ°á»£c táº¡o báº±ng Needle Starters Ä‘Ã£ báº­t tÃ­nh nÄƒng nÃ y theo máº·c Ä‘á»‹nh.</p></div><h2 id="t-o-v-h-y-i-t-ng" tabindex="-1"><a class="header-anchor" href="#t-o-v-h-y-i-t-ng"><span>Táº¡o vÃ  há»§y Ä‘á»‘i tÆ°á»£ng</span></a></h2><p>ThÃ´ng thÆ°á»ng, báº¡n muá»‘n táº¡o vÃ  há»§y Ä‘á»‘i tÆ°á»£ng trong thá»i gian cháº¡y, vÃ  táº¥t nhiÃªn nhá»¯ng thay Ä‘á»•i nÃ y pháº£i Ä‘Æ°á»£c Ä‘á»“ng bá»™ hÃ³a qua máº¡ng.</p><p>Component <code>PlayerSync</code> Ä‘Æ¡n giáº£n hÃ³a quy trÃ¬nh nÃ y báº±ng cÃ¡ch tá»± Ä‘á»™ng táº¡o thá»ƒ hiá»‡n má»™t Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ cho má»—i ngÆ°á»i chÆ¡i Ä‘Æ°á»£c káº¿t ná»‘i. Khi má»™t ngÆ°á»i chÆ¡i rá»i phÃ²ng, Ä‘á»‘i tÆ°á»£ng sáº½ bá»‹ há»§y cho táº¥t cáº£ ngÆ°á»i dÃ¹ng.</p><p>NgoÃ i ra, Needle Engine cung cáº¥p hai phÆ°Æ¡ng thá»©c cáº¥p cao:</p><ul><li><a href="https://engine.needle.tools/docs/api/latest/syncInstantiate" target="_blank" rel="noopener noreferrer"><code>syncInstantiate()</code></a> Ä‘á»ƒ sao chÃ©p Ä‘á»‘i tÆ°á»£ng qua máº¡ng.</li><li><a href="https://engine.needle.tools/docs/api/latest/syncDestroy" target="_blank" rel="noopener noreferrer"><code>syncDestroy()</code></a> Ä‘á»ƒ há»§y Ä‘á»‘i tÆ°á»£ng qua máº¡ng.</li></ul><blockquote><p>ğŸ—ï¸ Máº«u mÃ£ Ä‘ang Ä‘Æ°á»£c xÃ¢y dá»±ng</p></blockquote><h2 id="k-t-n-i-m-ng-th-c-ng" tabindex="-1"><a class="header-anchor" href="#k-t-n-i-m-ng-th-c-ng"><span>Káº¿t ná»‘i máº¡ng thá»§ cÃ´ng</span></a></h2><p>Needle Engine cÅ©ng cung cáº¥p API cáº¥p tháº¥p Ä‘á»ƒ gá»­i vÃ  nháº­n tin nháº¯n. ChÃºng tÃ´i gá»i Ä‘Ã¢y lÃ  &quot;káº¿t ná»‘i máº¡ng thá»§ cÃ´ng&quot;. CÃ¡c nguyÃªn táº¯c tÆ°Æ¡ng tá»±, nhÆ°ng báº¡n hoÃ n toÃ n kiá»ƒm soÃ¡t viá»‡c gá»­i vÃ  nháº­n tin nháº¯n cÅ©ng nhÆ° cÃ¡ch xá»­ lÃ½ chÃºng.</p><h3 id="g-i-tin-nh-n" tabindex="-1"><a class="header-anchor" href="#g-i-tin-nh-n"><span>Gá»­i tin nháº¯n</span></a></h3><p>Gá»­i tin nháº¯n Ä‘áº¿n táº¥t cáº£ ngÆ°á»i dÃ¹ng trong cÃ¹ng má»™t phÃ²ng:</p><div class="language-ts" data-highlighter="shiki" data-ext="ts" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">context</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">connection</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">send</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(key: string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> data: IModel </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">|</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> object </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">|</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> boolean </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">|</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> string </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">|</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> number </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">|</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;"> null</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span></code></pre></div><h3 id="nh-n-tin-nh-n" tabindex="-1"><a class="header-anchor" href="#nh-n-tin-nh-n"><span>Nháº­n tin nháº¯n</span></a></h3><p>Báº¡n cÃ³ thá»ƒ Ä‘Äƒng kÃ½ cÃ¡c sá»± kiá»‡n trong phÃ²ng báº±ng cÃ¡ch sá»­ dá»¥ng má»™t khÃ³a cá»¥ thá»ƒ. ThÃ´ng thÆ°á»ng, báº¡n sáº½ muá»‘n káº¿t há»£p Ä‘iá»u nÃ y vá»›i viá»‡c há»§y Ä‘Äƒng kÃ½:</p><ul><li><p>Ä‘Äƒng kÃ½ trong <code>onEnable</code> vÃ  há»§y Ä‘Äƒng kÃ½ trong <code>onDisable</code> Vá»›i cÃ¡ch tiáº¿p cáº­n nÃ y, khÃ´ng cÃ³ tin nháº¯n nÃ o sáº½ Ä‘Æ°á»£c nháº­n trong khi Ä‘á»‘i tÆ°á»£ng bá»‹ vÃ´ hiá»‡u hÃ³a.</p></li><li><p>hoáº·c Ä‘Äƒng kÃ½ trong <code>start</code> vÃ  há»§y Ä‘Äƒng kÃ½ trong <code>onDestroy</code> Vá»›i cÃ¡ch tiáº¿p cáº­n nÃ y, tin nháº¯n váº«n sáº½ Ä‘Æ°á»£c nháº­n trong khi Ä‘á»‘i tÆ°á»£ng bá»‹ vÃ´ hiá»‡u hÃ³a.</p></li></ul><div class="language-ts" data-highlighter="shiki" data-ext="ts" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">context</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">connection</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">beginListen</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(key:string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> callback:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">(</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EA999C;--shiki-dark-font-style:italic;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">)</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;"> =&gt;</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;"> void</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">)</span></span></code></pre></div><p>Há»§y Ä‘Äƒng kÃ½ cÃ¡c sá»± kiá»‡n:</p><div class="language-ts" data-highlighter="shiki" data-ext="ts" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">context</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">connection</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">stopListen</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(key:string)</span></span></code></pre></div><h3 id="ki-m-so-t-t-nh-b-n-v-ng-c-a-th-ng-b-o" tabindex="-1"><a class="header-anchor" href="#ki-m-so-t-t-nh-b-n-v-ng-c-a-th-ng-b-o"><span>Kiá»ƒm soÃ¡t tÃ­nh bá»n vá»¯ng cá»§a thÃ´ng bÃ¡o</span></a></h3><p>Khi gá»­i cÃ¡c tin nháº¯n máº¡ng, API cáº¥p tháº¥p cho phÃ©p báº¡n quyáº¿t Ä‘á»‹nh xem tin nháº¯n Ä‘Ã³ cÃ³ nÃªn Ä‘Æ°á»£c duy trÃ¬ (lÆ°u trong tráº¡ng thÃ¡i phÃ²ng) hay khÃ´ng (chá»‰ gá»­i Ä‘áº¿n nhá»¯ng ngÆ°á»i dÃ¹ng hiá»‡n Ä‘ang á»Ÿ trong phÃ²ng). Äá»ƒ duy trÃ¬ má»™t tin nháº¯n, hÃ£y Ä‘áº£m báº£o nÃ³ cÃ³ trÆ°á»ng <code>guid</code>. TrÆ°á»ng nÃ y thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ã¡p dá»¥ng dá»¯ liá»‡u tin nháº¯n cho má»™t Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ, báº±ng cÃ¡ch cung cáº¥p guid cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Ã³. Náº¿u báº¡n muá»‘n nháº¯m má»¥c tiÃªu má»™t Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ (vÃ  do Ä‘Ã³, bao gá»“m trÆ°á»ng <code>guid</code>) nhÆ°ng muá»‘n dá»¯ liá»‡u khÃ´ng Ä‘Æ°á»£c duy trÃ¬, hÃ£y Ä‘áº·t trÆ°á»ng <code>dontSave</code> thÃ nh <code>true</code> trong tin nháº¯n cá»§a báº¡n.</p><p>Táº¥t cáº£ cÃ¡c tin nháº¯n bá»n vá»¯ng Ä‘Æ°á»£c lÆ°u trong tráº¡ng thÃ¡i phÃ²ng vÃ  sáº½ Ä‘Æ°á»£c gá»­i Ä‘áº¿n nhá»¯ng ngÆ°á»i dÃ¹ng káº¿t ná»‘i sau nÃ y. CÃ¡c tin nháº¯n khÃ´ng bá»n vá»¯ng chá»‰ Ä‘Æ°á»£c gá»­i Ä‘áº¿n nhá»¯ng ngÆ°á»i dÃ¹ng hiá»‡n Ä‘ang á»Ÿ trong phÃ²ng, Ä‘iá»u nÃ y há»¯u Ã­ch cho cÃ¡c hiá»‡u á»©ng (nhÆ° phÃ¡t hiá»‡u á»©ng Ã¢m thanh) khÃ´ng cÃ³ Ã½ nghÄ©a khi phÃ¡t cho nhá»¯ng ngÆ°á»i dÃ¹ng hiá»‡n khÃ´ng á»Ÿ trong phÃ²ng. TÃ¹y chá»n, báº¡n cÃ³ thá»ƒ bao gá»“m trÆ°á»ng <code>deleteOnDisconnect</code> trong tin nháº¯n cá»§a mÃ¬nh Ä‘á»ƒ xÃ³a tin nháº¯n cá»¥ thá»ƒ nÃ y khi ngÆ°á»i dÃ¹ng ngáº¯t káº¿t ná»‘i.</p><div class="language-ts" data-highlighter="shiki" data-ext="ts" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// This message will be sent to all users currently in the room,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// AND to users that join the room later.</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">context</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">connection</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">send</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">&quot;my-message&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> guid</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">:</span><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;"> this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">guid</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> myData</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;myValue&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> }</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// This message will be sent to all users currently in the room,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// but NOT be sent to users that join the room later.</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">context</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">connection</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">send</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">&quot;my-message&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> guid</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">:</span><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;"> this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">guid</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> myData</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;myValue&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> dontSave</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">:</span><span style="--shiki-light:#FE640B;--shiki-dark:#EF9F76;"> true</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> }</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// This message will be sent to all users currently in the room,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// but NOT be sent to users that join the room later.</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">context</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">connection</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">send</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">&quot;my-message&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> myData</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;myValue&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> }</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// This message will be sent to all users currently in the room,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// AND to users that join the room later,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// but will be deleted from the room state when the user disconnects.</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">context</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">connection</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">send</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">&quot;my-message&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> guid</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">:</span><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;"> this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">guid</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> myData</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;myValue&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> deleteOnDisconnect</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">:</span><span style="--shiki-light:#FE640B;--shiki-dark:#EF9F76;"> true</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> }</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span></code></pre></div><p>Äá»ƒ xÃ³a tráº¡ng thÃ¡i cho má»™t guid cá»¥ thá»ƒ khá»i bá»™ nhá»› backend, hÃ£y Ä‘áº·t khÃ³a tin nháº¯n thÃ nh <code>delete-state</code> vÃ  nháº¯m má»¥c tiÃªu má»™t Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ báº±ng guid cá»§a nÃ³: <code>{ guid: &quot;guid_to_delete&quot; }</code>.</p><div class="language-ts" data-highlighter="shiki" data-ext="ts" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">context</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">connection</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">send</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">&quot;delete-state&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> guid</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;guid_to_delete&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> }</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span></code></pre></div><h3 id="s-d-ng-c-g-l-i-hi-u-tin-nh-n-m-ng" tabindex="-1"><a class="header-anchor" href="#s-d-ng-c-g-l-i-hi-u-tin-nh-n-m-ng"><span>Sá»­ dá»¥ng cá» gá»¡ lá»—i Ä‘á»ƒ hiá»ƒu tin nháº¯n máº¡ng</span></a></h3><p>CÃ³ má»™t sá»‘ cá» gá»¡ lá»—i cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ¬m hiá»ƒu sÃ¢u hÆ¡n vá» tin nháº¯n máº¡ng. ChÃºng cÃ³ thá»ƒ Ä‘Æ°á»£c thÃªm vÃ o URL trang, vÃ­ dá»¥ <code>https://localhost:3000/?debugnet</code>.</p><table><thead><tr><th style="text-align:left;">Cá»</th><th style="text-align:left;">MÃ´ táº£</th></tr></thead><tbody><tr><td style="text-align:left;"><code>?debugnet</code></td><td style="text-align:left;">Ghi log táº¥t cáº£ tin nháº¯n máº¡ng Ä‘áº¿n vÃ  Ä‘i vÃ o console</td></tr><tr><td style="text-align:left;"><code>?debugowner</code></td><td style="text-align:left;">Ghi log táº¥t cáº£ yÃªu cáº§u vÃ  thay Ä‘á»•i quyá»n sá»Ÿ há»¯u vÃ o console</td></tr><tr><td style="text-align:left;"><code>?debugnetbin</code></td><td style="text-align:left;">Ghi log thÃ´ng tin bá»• sung cho tin nháº¯n nhá»‹ phÃ¢n Ä‘áº¿n vÃ  Ä‘i vÃ o console</td></tr></tbody></table><h2 id="c-c-s-ki-n-v-ng-i-k-t-n-i-m-ng" tabindex="-1"><a class="header-anchor" href="#c-c-s-ki-n-v-ng-i-k-t-n-i-m-ng"><span>CÃ¡c sá»± kiá»‡n vÃ²ng Ä‘á»i káº¿t ná»‘i máº¡ng</span></a></h2><p>CÃ¡c sá»± kiá»‡n sau Ä‘Ã¢y cÃ³ sáºµn Ä‘á»ƒ láº¯ng nghe trong cÃ¡c component cá»§a báº¡n. ChÃºng mÃ´ táº£ cÃ¡c sá»± kiá»‡n máº¡ng phá»• biáº¿n mÃ  báº¡n cÃ³ thá»ƒ muá»‘n pháº£n á»©ng láº¡i trong cÃ¡c component cá»§a mÃ¬nh, cháº³ng háº¡n nhÆ° chÃ­nh báº¡n hoáº·c ngÆ°á»i dÃ¹ng khÃ¡c tham gia hoáº·c rá»i phÃ²ng.</p><div class="language-ts" data-highlighter="shiki" data-ext="ts" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Listen to the event when *you* have joined a networked room</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">context</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">beginListen</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(RoomEvents</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">JoinedRoom</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> ({</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EA999C;--shiki-dark-font-style:italic;">room</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EA999C;--shiki-dark-font-style:italic;"> viewId</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EA999C;--shiki-dark-font-style:italic;"> allowEditing</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EA999C;--shiki-dark-font-style:italic;"> inRoom</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">})</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;"> =&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;"> ...</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> }</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Listen to the event when *you* have left a networked room</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">context</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">beginListen</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(RoomEvents</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">LeftRoom</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> ({</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EA999C;--shiki-dark-font-style:italic;">room</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">})</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;"> =&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;"> ...</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> }</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Listen to the event when *another user* has joined your networked room</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">context</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">beginListen</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(RoomEvents</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">UserJoinedRoom</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> ({</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EA999C;--shiki-dark-font-style:italic;">userId</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">})</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;"> =&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;"> ...</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> }</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Listen to the event when *another user* has left your networked room</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">context</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">beginListen</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(RoomEvents</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">UserLeftRoom</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> ({</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EA999C;--shiki-dark-font-style:italic;">userId</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">})</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;"> =&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;"> ...</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> }</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// This event is received after all current room state has been sent to the client</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">context</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">beginListen</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(RoomEvents</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">RoomStateSent</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> ()</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;"> =&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;"> ...</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> }</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span></code></pre></div><ul><li><a href="https://engine.needle.tools/docs/api/latest/RoomEvents" target="_blank" rel="noopener noreferrer">Xem táº¥t cáº£ cÃ¡c sá»± kiá»‡n PhÃ²ng trong tÃ i liá»‡u API</a></li><li><a href="https://engine.needle.tools/docs/api/latest/OwnershipEvent" target="_blank" rel="noopener noreferrer">Xem táº¥t cáº£ cÃ¡c sá»± kiá»‡n Quyá»n sá»Ÿ há»¯u trong tÃ i liá»‡u API</a></li><li><a href="https://engine.needle.tools/docs/api/latest/ConnectionEvents" target="_blank" rel="noopener noreferrer">Xem táº¥t cáº£ cÃ¡c sá»± kiá»‡n Káº¿t ná»‘i trong tÃ i liá»‡u API</a></li></ul><h2 id="s-d-ng-m-y-ch-k-t-n-i-m-ng-needle" tabindex="-1"><a class="header-anchor" href="#s-d-ng-m-y-ch-k-t-n-i-m-ng-needle"><span>Sá»­ dá»¥ng MÃ¡y chá»§ káº¿t ná»‘i máº¡ng Needle</span></a></h2><p>Theo máº·c Ä‘á»‹nh, cÃ¡c cáº£nh Needle cÃ³ káº¿t ná»‘i máº¡ng káº¿t ná»‘i vá»›i háº¡ táº§ng Ä‘Ã¡m mÃ¢y Ä‘Æ°á»£c quáº£n lÃ½ vÃ  cung cáº¥p bá»Ÿi Needle. KhÃ´ng cáº§n cÃ i Ä‘áº·t bá»• sung vÃ  hiá»‡n táº¡i khÃ´ng cÃ³ chi phÃ­ bá»• sung nÃ o cho viá»‡c sá»­ dá»¥ng dá»‹ch vá»¥ nÃ y.</p><p>ThÃ´ng thÆ°á»ng, Ä‘iá»u nÃ y sáº½ hoáº¡t Ä‘á»™ng tá»‘t cho khoáº£ng 15-20 ngÆ°á»i dÃ¹ng trong cÃ¹ng má»™t phÃ²ng. Khi dá»± Ã¡n cá»§a báº¡n trÆ°á»Ÿng thÃ nh, báº¡n cÃ³ thá»ƒ nÃ¢ng cáº¥p lÃªn giáº£i phÃ¡p káº¿t ná»‘i máº¡ng lá»›n hÆ¡n/tá»‘t hÆ¡n/máº¡nh máº½ hÆ¡n báº±ng cÃ¡ch lÆ°u trá»¯ mÃ¡y chá»§ káº¿t ná»‘i máº¡ng cá»§a riÃªng báº¡n.</p><h2 id="l-u-tr-m-y-ch-k-t-n-i-m-ng-c-a-ri-ng-b-n" tabindex="-1"><a class="header-anchor" href="#l-u-tr-m-y-ch-k-t-n-i-m-ng-c-a-ri-ng-b-n"><span>LÆ°u trá»¯ MÃ¡y chá»§ káº¿t ná»‘i máº¡ng cá»§a riÃªng báº¡n</span></a></h2><p>Báº¡n cÃ³ thá»ƒ muá»‘n lÆ°u trá»¯ mÃ¡y chá»§ káº¿t ná»‘i máº¡ng cá»§a riÃªng mÃ¬nh cho cÃ¡c triá»ƒn khai lá»›n hÆ¡n hoáº·c Ä‘á»ƒ cÃ³ nhiá»u quyá»n kiá»ƒm soÃ¡t hÆ¡n Ä‘á»‘i vá»›i háº¡ táº§ng vÃ  triá»ƒn khai káº¿t ná»‘i máº¡ng.</p><p>MÃ¡y chá»§ káº¿t ná»‘i máº¡ng cá»§a chÃºng tÃ´i cÃ³ sáºµn trÃªn NPM <a href="https://fwd.needle.tools/needle-engine/packages/needle-engine-networking" target="_blank" rel="noopener noreferrer">gÃ³i káº¿t ná»‘i máº¡ng riÃªng</a> dÆ°á»›i dáº¡ng gÃ³i node.js. GÃ³i nÃ y chá»©a cÃ¡c tÃ­ch há»£p Ä‘Æ°á»£c cáº¥u hÃ¬nh sáºµn cho cÃ¡c framework web phá»• biáº¿n <a href="https://www.npmjs.com/package/fastify" target="_blank" rel="noopener noreferrer">Fastify</a> vÃ  <a href="https://www.npmjs.com/package/express" target="_blank" rel="noopener noreferrer">Express</a>, vÃ  cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ­ch há»£p vÃ o cÃ¡c framework mÃ¡y chá»§ Node.js khÃ¡c.</p><div class="hint-container tip"><p class="hint-container-title">Äá»ƒ thá»­ nghiá»‡m nhanh: Remix trÃªn Glitch</p><p>Báº¡n cÃ³ thá»ƒ remix má»™t mÃ¡y chá»§ káº¿t ná»‘i máº¡ng Ä‘Æ¡n giáº£n cháº¡y trÃªn Glitch tá»« trang nÃ y: <a href="https://needle-networking.glitch.me/" target="_blank" rel="noopener noreferrer">needle-networking.glitch.me</a> báº±ng cÃ¡ch nháº¥p vÃ o nÃºt á»Ÿ gÃ³c dÆ°á»›i bÃªn pháº£i.</p><p>PhiÃªn báº£n mÃ¡y chá»§ Glitch máº·c Ä‘á»‹nh nhá» vÃ  chá»‰ cÃ³ thá»ƒ xá»­ lÃ½ má»™t sá»‘ lÆ°á»£ng ngÆ°á»i dÃ¹ng háº¡n cháº¿. Náº¿u báº¡n mong Ä‘á»£i hÆ¡n 15-20 ngÆ°á»i á»Ÿ trong cáº£nh cá»§a mÃ¬nh cÃ¹ng lÃºc, báº¡n nÃªn xem xÃ©t lÆ°u trá»¯ mÃ¡y chá»§ káº¿t ná»‘i máº¡ng cá»§a mÃ¬nh á»Ÿ nÆ¡i khÃ¡c (nhÆ° trÃªn Google Cloud hoáº·c AWS).</p></div><p>::::code-group :::code-group-item Fastify</p><div class="language-js" data-highlighter="shiki" data-ext="js" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">import</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> networking </span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">from</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;@needle-tools/needle-networking&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">networking</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">startServerFastify</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(fastifyApp</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> endpoint</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;/socket&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> }</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span></code></pre></div><p>::: :::code-group-item Express</p><div class="language-js" data-highlighter="shiki" data-ext="js" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">import</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> networking </span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">from</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;@needle-tools/needle-networking&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">networking</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">startServerExpress</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(expressApp</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> endpoint</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;/socket&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> }</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span></code></pre></div><p>::: :::code-group-item TÃ­ch há»£p tÃ¹y chá»‰nh</p><div class="language-js" data-highlighter="shiki" data-ext="js" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">import</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> onConnection </span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;"> from</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;@needle-tools/networking&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Add your framework-specific websocket implementation here. </span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// You can view the fastify and express implementations in server.js for reference.</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">class</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#E5C890;--shiki-dark-font-style:italic;"> WebsocketConnector</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">    constructor</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">(</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EA999C;--shiki-dark-font-style:italic;">frameworkWebsocket</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">        // Your implementation.</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">    on</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">(</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EA999C;--shiki-dark-font-style:italic;">event</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EA999C;--shiki-dark-font-style:italic;"> callback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">        // Your implementation. When receiving a message in the websocket connection, call the callback.</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">        // &#39;event&#39; can be &#39;message&#39; or &#39;close&#39;.</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">    send</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">(</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EA999C;--shiki-dark-font-style:italic;">key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EA999C;--shiki-dark-font-style:italic;"> value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">        // Your implementation. Pass the message along to the websocket connection.</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">const</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> options </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> endpoint</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;/socket&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> };</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">init</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(options)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">yourFramework</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">createWebsocketRoute</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(options</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">endpoint</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EA999C;--shiki-dark-font-style:italic;"> frameworkWebsocket</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;"> =&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">    onConnection</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#CA9EE6;--shiki-dark-font-weight:bold;">new</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;"> WebsocketConnector</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(frameworkWebsocket))</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span></code></pre></div><p>::: ::::</p><div class="hint-container tip"><p class="hint-container-title">VÃ­ dá»¥ trÃªn Glitch.com</p><p>Xem mÃ£ trÃªn <a href="https://glitch.com/edit/#!/needle-networking?path=server.js" target="_blank" rel="noopener noreferrer">glitch.com/edit/#!/needle-networking</a> Ä‘á»ƒ biáº¿t vÃ­ dá»¥ vá» cÃ¡ch tÃ­ch há»£p Needle Networking vá»›i mÃ¡y chá»§ Express.</p></div><h3 id="c-u-h-nh" tabindex="-1"><a class="header-anchor" href="#c-u-h-nh"><span>Cáº¥u hÃ¬nh</span></a></h3><p>CÃ¡c tÃ¹y chá»n sau cÃ³ sáºµn:</p><table><thead><tr><th style="text-align:left;">TÃ¹y chá»n</th><th style="text-align:left;">MÃ´ táº£</th></tr></thead><tbody><tr><td style="text-align:left;"><code>options.endpoint</code> <em>string</em></td><td style="text-align:left;">TÃ¹y chá»n. Endpoint mÃ¡y chá»§ tÆ°Æ¡ng Ä‘á»‘i. VÃ­ dá»¥: <code>/socket</code> sáº½ báº¯t Ä‘áº§u endpoint websocket trÃªn <code>yourserver/socket</code>. Máº·c Ä‘á»‹nh lÃ  <code>/</code>.</td></tr><tr><td style="text-align:left;"><code>options.maxUsers</code> <em>number</em></td><td style="text-align:left;">Sá»‘ lÆ°á»£ng ngÆ°á»i dÃ¹ng Ä‘á»“ng thá»i tá»‘i Ä‘a trÃªn má»™t mÃ¡y chá»§. Máº·c Ä‘á»‹nh lÃ  <code>50</code>.</td></tr><tr><td style="text-align:left;"><code>options.defaultUserTimeout</code> <em>number</em></td><td style="text-align:left;">Thá»i gian tÃ­nh báº±ng giÃ¢y sau Ä‘Ã³ ngÆ°á»i dÃ¹ng Ä‘Æ°á»£c coi lÃ  Ä‘Ã£ ngáº¯t káº¿t ná»‘i. Máº·c Ä‘á»‹nh lÃ  <code>30</code>.</td></tr><tr><td style="text-align:left;"><code>process.env.VIEW_ONLY_SALT</code> <em>string</em></td><td style="text-align:left;">GiÃ¡ trá»‹ muá»‘i Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº¡o ID phÃ²ng chá»‰ xem tá»« cÃ¡c ID phÃ²ng thÃ´ng thÆ°á»ng. Máº·c Ä‘á»‹nh lÃ  má»™t giÃ¡ trá»‹ muá»‘i Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trÆ°á»›c.</td></tr><tr><td style="text-align:left;"><code>process.env.NEEDLE_NETWORKING_S3_*</code> <em>string</em></td><td style="text-align:left;">Báº­t lÆ°u trá»¯ S3. Xem pháº§n dÆ°á»›i Ä‘Ã¢y Ä‘á»ƒ biáº¿t danh sÃ¡ch Ä‘áº§y Ä‘á»§ cÃ¡c biáº¿n mÃ´i trÆ°á»ng báº¡n cáº§n thiáº¿t láº­p cho Ä‘iá»u nÃ y. Khi khÃ´ng Ä‘Æ°á»£c thiáº¿t láº­p, bá»™ nhá»› máº·c Ä‘á»‹nh Ä‘Æ°á»£c sá»­ dá»¥ng (tá»‡p JSON trÃªn Ä‘Ä©a).</td></tr></tbody></table><p>MÃ¡y chá»§ káº¿t ná»‘i máº¡ng sáº½ tá»± Ä‘á»™ng quáº£n lÃ½ viá»‡c káº¿t ná»‘i vÃ  ngáº¯t káº¿t ná»‘i ngÆ°á»i dÃ¹ng, nháº­n vÃ  gá»­i tin nháº¯n, vÃ  duy trÃ¬ tráº¡ng thÃ¡i phÃ²ng.</p><p>CÃ¡c mÃ¡y chá»§ káº¿t ná»‘i máº¡ng tÃ¹y chá»‰nh cÃ³ thá»ƒ Ä‘Æ°á»£c triá»ƒn khai á»Ÿ báº¥t ká»³ Ä‘Ã¢u, vÃ­ dá»¥ nhÆ° trÃªn Google Cloud. Äá»ƒ biáº¿t thÃªm hÆ°á»›ng dáº«n, vui lÃ²ng tham kháº£o kho lÆ°u trá»¯ nÃ y: <a href="https://fwd.needle.tools/needle-engine/local-networking-repository" target="_blank" rel="noopener noreferrer">MÃ¡y chá»§ káº¿t ná»‘i máº¡ng cá»¥c bá»™ Needle</a></p><div class="hint-container tip"><p class="hint-container-title">CÃ¡c vá»‹ trÃ­ mÃ¡y chá»§ khÃ¡c nhau cho phÃ¡t triá»ƒn cá»¥c bá»™ vÃ  Ä‘Æ°á»£c lÆ°u trá»¯</p><p>Náº¿u báº¡n Ä‘ang lÃ m viá»‡c trÃªn mÃ£ káº¿t ná»‘i máº¡ng tÃ¹y chá»‰nh, báº¡n cÃ³ thá»ƒ muá»‘n sá»­ dá»¥ng cÃ¡c vá»‹ trÃ­ mÃ¡y chá»§ khÃ¡c nhau cho phÃ¡t triá»ƒn cá»¥c bá»™ vÃ  á»©ng dá»¥ng Ä‘Æ°á»£c lÆ°u trá»¯. Báº¡n cÃ³ thá»ƒ Ä‘áº·t cÃ¡c URL mÃ¡y chá»§ riÃªng láº» trong component <code>Networking</code>:</p><p><img src="`+s+`" alt="Component káº¿t ná»‘i máº¡ng Needle Engine vá»›i mÃ¡y chá»§ káº¿t ná»‘i máº¡ng Ä‘Æ°á»£c lÆ°u trá»¯ á»Ÿ nÆ¡i khÃ¡c"></p></div><h4 id="l-u-tr-tr-ng-th-i" tabindex="-1"><a class="header-anchor" href="#l-u-tr-tr-ng-th-i"><span>LÆ°u trá»¯ Tráº¡ng thÃ¡i</span></a></h4><p>Tráº¡ng thÃ¡i máº¡ng theo máº·c Ä‘á»‹nh Ä‘Æ°á»£c lÆ°u vÃ o Ä‘Ä©a trÃªn mÃ¡y chá»§ dÆ°á»›i dáº¡ng tá»‡p JSON trong thÆ° má»¥c <code>/.data</code>. Má»—i phÃ²ng cÃ³ tá»‡p riÃªng vÃ  tráº¡ng thÃ¡i Ä‘Æ°á»£c gá»­i Ä‘áº¿n cÃ¡c client káº¿t ná»‘i khi há» tham gia phÃ²ng.</p><p>TÃ¹y chá»n, tráº¡ng thÃ¡i káº¿t ná»‘i máº¡ng cÃ³ thá»ƒ Ä‘Æ°á»£c lÆ°u trá»¯ vá»›i nhÃ  cung cáº¥p lÆ°u trá»¯ tÆ°Æ¡ng thÃ­ch S3. Sá»­ dá»¥ng cÃ¡c biáº¿n mÃ´i trÆ°á»ng sau Ä‘á»ƒ báº­t lÆ°u trá»¯ S3:</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">NEEDLE_NETWORKING_S3_ENDPOINT</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">NEEDLE_NETWORKING_S3_REGION</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">NEEDLE_NETWORKING_S3_BUCKET</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">NEEDLE_NETWORKING_S3_ACCESS_KEY_ID</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">NEEDLE_NETWORKING_S3_ACCESS_KEY</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">NEEDLE_NETWORKING_S3_PREFIX</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;"> # all state saved in the bucket will be prefixed with this string. This can be a path e.g. \`my_state/\` or a unique id \`server_123_\`</span></span></code></pre></div><h2 id="m-y-ch-k-t-n-i-m-ng-c-c-b" tabindex="-1"><a class="header-anchor" href="#m-y-ch-k-t-n-i-m-ng-c-c-b"><span>MÃ¡y chá»§ káº¿t ná»‘i máº¡ng cá»¥c bá»™</span></a></h2><p>Äá»ƒ kiá»ƒm tra vÃ  phÃ¡t triá»ƒn, báº¡n cÃ³ thá»ƒ cháº¡y gÃ³i káº¿t ná»‘i máº¡ng Needle Engine trÃªn mÃ¡y chá»§ cá»¥c bá»™. ChÃºng tÃ´i Ä‘Ã£ chuáº©n bá»‹ má»™t kho lÆ°u trá»¯ Ä‘Æ°á»£c thiáº¿t láº­p Ä‘á»ƒ lÆ°u trá»¯ gÃ³i websocket vÃ  giÃºp báº¡n dá»… dÃ ng thá»±c hiá»‡n Ä‘iá»u Ä‘Ã³.</p><ol><li>Táº£i xuá»‘ng máº«u mÃ¡y chá»§ cá»¥c bá»™ tá»« <a href="https://fwd.needle.tools/needle-engine/local-networking-repository" target="_blank" rel="noopener noreferrer">github.com/needle-tools/networking-local</a></li><li>LÃ m theo hÆ°á»›ng dáº«n trong README Ä‘á»ƒ thiáº¿t láº­p mÃ¡y chá»§. MÃ¡y chá»§ sáº½ cháº¡y trÃªn <code>wss://localhost:9001/socket</code> theo máº·c Ä‘á»‹nh.</li><li>ThÃªm component <code>Networking</code> vÃ o cáº£nh cá»§a báº¡n.</li><li>DÃ¡n Ä‘á»‹a chá»‰ mÃ¡y chá»§ cá»¥c bá»™ vÃ o trÆ°á»ng <code>Localhost</code> trÃªn component <code>Networking</code>.</li></ol><h2 id="n-ng-cao-t-y-ch-nh-c-i-t-webrtc-cho-peer.js" tabindex="-1"><a class="header-anchor" href="#n-ng-cao-t-y-ch-nh-c-i-t-webrtc-cho-peer.js"><span>NÃ¢ng cao: TÃ¹y chá»‰nh cÃ i Ä‘áº·t WebRTC cho peer.js</span></a></h2><p>CÃ¡c component <code>Screencapture</code> (Chia sáº» mÃ n hÃ¬nh) vÃ  <code>VoIP</code> (Giao tiáº¿p thoáº¡i) cá»§a Needle Engine sá»­ dá»¥ng <a href="https://peerjs.com/" target="_blank" rel="noopener noreferrer">peer.js</a> Ä‘á»ƒ káº¿t ná»‘i máº¡ng Ã¢m thanh vÃ  video. Peer.js sá»­ dá»¥ng WebRTC dÆ°á»›i ná»n.</p><p>Needle Engine sá»­ dá»¥ng cÃ¡c giÃ¡ trá»‹ máº·c Ä‘á»‹nh há»£p lÃ½ cho peerjs. Náº¿u báº¡n muá»‘n sá»­a Ä‘á»•i cÃ¡c giÃ¡ trá»‹ máº·c Ä‘á»‹nh Ä‘Ã³, báº¡n cÃ³ thá»ƒ gá»i</p><div class="language-ts" data-highlighter="shiki" data-ext="ts" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">setPeerOptions</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(opts: PeerjsOptions)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span></code></pre></div><p>vá»›i cÃ¡c cÃ i Ä‘áº·t tÃ¹y chá»‰nh cá»§a báº¡n. Äiá»u nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ sá»­a Ä‘á»•i nhÃ  cung cáº¥p lÆ°u trá»¯ cho mÃ¡y chá»§ ICE/STUN/TURN, vÃ­ dá»¥ khi báº¡n sá»­ dá»¥ng mÃ¡y chá»§ WebRTC cá»§a riÃªng mÃ¬nh.</p><h2 id="n-ng-cao-nh-d-ng-th-ng-b-o-c-a-m-y-ch-v-client" tabindex="-1"><a class="header-anchor" href="#n-ng-cao-nh-d-ng-th-ng-b-o-c-a-m-y-ch-v-client"><span>NÃ¢ng cao: Äá»‹nh dáº¡ng thÃ´ng bÃ¡o cá»§a MÃ¡y chá»§ vÃ  Client</span></a></h2><div class="hint-container warning"><p class="hint-container-title">Chá»‰ dÃ nh cho má»¥c Ä‘Ã­ch thÃ´ng tin. HÃ£y sá»­ dá»¥ng cÃ¡c API Ä‘Æ°á»£c cung cáº¥p bá»Ÿi Needle Engine thay tháº¿.</p><p>ThÃ´ng thÆ°á»ng, báº¡n khÃ´ng cáº§n tÆ°Æ¡ng tÃ¡c trá»±c tiáº¿p vá»›i cÃ¡c Ä‘á»‹nh dáº¡ng thÃ´ng bÃ¡o nÃ y, vÃ¬ API káº¿t ná»‘i máº¡ng cáº¥p tháº¥p Ä‘Ã£ xá»­ lÃ½ viá»‡c phÃ¢n tÃ­ch cÃº phÃ¡p tin nháº¯n vÃ  cung cáº¥p cho báº¡n cÃ¡c loáº¡i dá»¯ liá»‡u chÃ­nh xÃ¡c. ThÃ´ng tin á»Ÿ Ä‘Ã¢y Ä‘Æ°á»£c cung cáº¥p cho ngÆ°á»i dÃ¹ng nÃ¢ng cao muá»‘n hiá»ƒu cÃ¡c Ä‘á»‹nh dáº¡ng tin nháº¯n cÆ¡ báº£n hoáº·c triá»ƒn khai cÃ¡c giáº£i phÃ¡p káº¿t ná»‘i máº¡ng cá»§a riÃªng há».</p></div><p>Tin nháº¯n Ä‘Æ°á»£c gá»­i á»Ÿ Ä‘á»‹nh dáº¡ng JSON. ChÃºng luÃ´n cÃ³ má»™t trÆ°á»ng <code>key</code> mÃ´ táº£ loáº¡i tin nháº¯n vÃ  má»™t trÆ°á»ng <code>data</code> chá»©a táº£i trá»ng tin nháº¯n. TrÆ°á»ng <code>data</code> cÃ³ thá»ƒ lÃ  báº¥t ká»³ Ä‘á»‘i tÆ°á»£ng nÃ o cÃ³ thá»ƒ tuáº§n tá»± hÃ³a JSON.</p><h3 id="c-c-s-ki-n-ph-ng-t-ch-h-p-s-n" tabindex="-1"><a class="header-anchor" href="#c-c-s-ki-n-ph-ng-t-ch-h-p-s-n"><span>CÃ¡c sá»± kiá»‡n phÃ²ng tÃ­ch há»£p sáºµn</span></a></h3><p>::::code-group :::code-group-item Tham gia</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Sent to the server to attempt joining a room.</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;join-room&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">room</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">viewOnly</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> boolean</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><p>::: :::code-group-item Rá»i Ä‘i</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Sent to the server to leave a room.</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;leave-room&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">room</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> string</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><p>::: :::code-group-item JoinedRoom</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Sent to the client when the local user has joined a room.</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Type: JoinedRoomResponse</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;joined-room&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">room</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">viewId</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">allowEditing</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> boolean</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">inRoom</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">[]</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;"> // connection IDs</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><p>::: :::code-group-item LeftRoom</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Sent to the client when the local user has left a room.</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Type: LeftRoomResponse</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;left-room&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">room</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> string</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><p>::: :::code-group-item UserJoinedRoom</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Sent to the client when any user has joined a room.</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Type: UserJoinedOrLeftRoomModel</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;user-joined-room&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">userId</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> string </span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// connection ID</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><p>::: :::code-group-item UserLeftRoom</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Sent to the client when any user has left a room.</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Type: UserJoinedOrLeftRoomModel</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;user-left-room&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">userId</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> string </span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// connection ID</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><p>::: :::code-group-item RoomStateSent</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Sent to the client after the complete room state has been sent.</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;room-state-sent&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">room</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> string </span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// room name </span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><p>::: ::::</p><h3 id="c-c-s-ki-n-ti-n-ch-t-ch-h-p-s-n" tabindex="-1"><a class="header-anchor" href="#c-c-s-ki-n-ti-n-ch-t-ch-h-p-s-n"><span>CÃ¡c sá»± kiá»‡n tiá»‡n Ã­ch tÃ­ch há»£p sáºµn</span></a></h3><p>::::code-group :::code-group-item ConnectionInfo</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Sent to the client when the connection is established.</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;connection-start-info&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">id</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> string </span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// connection ID</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><p>::: :::code-group-item syncInstantiate</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Used by the syncInstantiate() API to create a new instance of an asset.</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Type: NewInstanceModel</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;new-instance-created&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">guid</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">originalGuid</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">seed</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> number | undefined</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">visible</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> boolean | undefined</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">dontSave</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> boolean | undefined</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">parent</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> string | undefined</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">position</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> x</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> number</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> y</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> number</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> z</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> number </span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> | undefined</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">rotation</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> x</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> number</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> y</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> number</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> z</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> number</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> w</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> number </span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> | undefined</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">scale</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> x</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> number</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> y</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> number</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> z</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> number </span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> | undefined</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">deleteStateOnDisconnect</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> boolean | undefined</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span></code></pre></div><p>::: :::code-group-item syncDestroy</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Used by the syncDestroy() API to destroy an instance of an asset.</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Type: DestroyInstanceModel</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;instance-destroyed&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">guid</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">dontSave</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> boolean | undefined</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><p>::: :::code-group-item Ping</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Sent to the server every few seconds to keep the connection alive.</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;ping&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {}</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><p>::: :::code-group-item Pong</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Sent by the server in response to a ping.</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;pong&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {}</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><p>::: :::code-group-item DeleteState</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Sent to the server to delete state for a specific guid.</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;delete-state&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">guid</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> &lt;string&gt;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><p>::: :::code-group-item DeleteAllState</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Sent to the server to delete ALL current room state.</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;delete-all-state&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {}</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><p>::::</p><h3 id="c-c-s-ki-n-quy-n-s-h-u-t-ch-h-p-s-n" tabindex="-1"><a class="header-anchor" href="#c-c-s-ki-n-quy-n-s-h-u-t-ch-h-p-s-n"><span>CÃ¡c sá»± kiá»‡n quyá»n sá»Ÿ há»¯u tÃ­ch há»£p sáºµn</span></a></h3><p>::::code-group :::code-group-item OwnershipRequest</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> </span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">      &quot;request-has-owner&quot;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> | </span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">      &quot;request-ownership&quot;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> | </span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">      &quot;remove-ownership&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">guid</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> string</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><p>::: :::code-group-item OwnershipResponse // Type: OwnershipResponse</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> </span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">      &quot;response-has-owner&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">guid</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> boolean</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><p>::: ::: code-group-item OwnershipBroadcastResponse</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> </span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">      &quot;gained-ownership&quot;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> | </span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">      &quot;lost-ownership&quot;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> | </span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">      &quot;gained-ownership-broadcast&quot;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> | </span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">      &quot;lost-ownership-broadcast&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">guid</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">        &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#8CAAEE;">owner</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> string</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><p>::: ::::</p><h3 id="c-c-schema-flatbuffer-t-ch-h-p-s-n" tabindex="-1"><a class="header-anchor" href="#c-c-schema-flatbuffer-t-ch-h-p-s-n"><span>CÃ¡c schema Flatbuffer tÃ­ch há»£p sáºµn</span></a></h3><p>Tin nháº¯n Flatbuffer Ä‘Æ°á»£c gá»­i trá»±c tiáº¿p dÆ°á»›i dáº¡ng tin nháº¯n nhá»‹ phÃ¢n.</p><p>::::code-group :::code-group-item SyncedTransform (&#39;STRS&#39;)</p><div class="language-cs" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">include </span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">&quot;vec.fbs&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">struct</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#E5C890;--shiki-dark-font-style:italic;"> Transform</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    position:Vec3</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    rotation:Vec3</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    scale:Vec3</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">table SyncedTransformModel </span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    guid</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    fast</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">bool</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    transform</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> Transform</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    dont_save</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">bool</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#E5C890;--shiki-dark-font-style:italic;">root_type</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> SyncedTransformModel</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span></code></pre></div><p>::: :::code-group-item SyncedCamera (&#39;SCAM&#39;)</p><div class="language-cs" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">include </span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">&quot;vec.fbs&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">table SyncedCameraModel </span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">{</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    user_id</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    guid</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    dont_save</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">bool</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    pos</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">Vec3</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    rot</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">Vec3</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#E5C890;--shiki-dark-font-style:italic;">root_type</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> SyncedCameraModel</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span></code></pre></div><p>::: :::code-group-item Vec2|3|4</p><div class="language-cs" data-highlighter="shiki" data-ext="cs" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">struct</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#E5C890;--shiki-dark-font-style:italic;"> Vec2</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">  x:float</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">  y:float</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">struct</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#E5C890;--shiki-dark-font-style:italic;"> Vec3</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">  x:float</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">  y:float</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">  z:float</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">struct</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#E5C890;--shiki-dark-font-style:italic;"> Vec4</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">  x:float</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">  y:float</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">  z:float</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">  w:float</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><p>::: ::::</p><h2 id="n-ng-cao-tin-nh-n-nh-ph-n-nh-d-ng-flatbuffer" tabindex="-1"><a class="header-anchor" href="#n-ng-cao-tin-nh-n-nh-ph-n-nh-d-ng-flatbuffer"><span>NÃ¢ng cao: Tin nháº¯n nhá»‹ phÃ¢n á»Ÿ Ä‘á»‹nh dáº¡ng Flatbuffer</span></a></h2><p>Tin nháº¯n JSON dá»… sá»­ dá»¥ng vÃ  hiá»ƒu, nhÆ°ng thÆ°á»ng lá»›n hÆ¡n vá» bá»™ nhá»› vÃ  bÄƒng thÃ´ng. Äá»‘i vá»›i lÆ°á»£ng lá»›n dá»¯ liá»‡u hoáº·c khi gá»­i cÃ¡c cáº­p nháº­t nhanh, tin nháº¯n nhá»‹ phÃ¢n nhanh hÆ¡n vÃ  hiá»‡u quáº£ hÆ¡n. Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng tin nháº¯n Flatbuffers trong Needle Engine cho nhá»¯ng trÆ°á»ng há»£p cáº§n thiáº¿t Ä‘Ã³. Sá»­ dá»¥ng Flatbuffers yÃªu cáº§u cÃ¡c bÆ°á»›c cÃ i Ä‘áº·t bá»• sung nhÆ° Ä‘á»‹nh nghÄ©a vÃ  biÃªn dá»‹ch má»™t schema tin nháº¯n vÃ  khÃ³ gá»¡ lá»—i hÆ¡n vÃ¬ báº¡n Ä‘ang xá»­ lÃ½ cÃ¡c tin nháº¯n nhá»‹ phÃ¢n.</p><p>LÆ°u Ã½ ráº±ng khi gá»­i vÃ  nháº­n tin nháº¯n flatbuffer, khÃ´ng cÃ³ trÆ°á»ng <code>key</code> â€“ loáº¡i tin nháº¯n lÃ  má»™t pháº§n cá»§a schema Flatbuffer. Nhá»¯ng gÃ¬ báº¡n gá»­i vÃ  nháº­n qua káº¿t ná»‘i Websocket lÃ  má»™t buffer nhá»‹ phÃ¢n duy nháº¥t.</p><p>Gá»­i tin nháº¯n nhá»‹ phÃ¢n Ä‘áº¿n táº¥t cáº£ ngÆ°á»i dÃ¹ng trong cÃ¹ng má»™t phÃ²ng:</p><div class="language-ts" data-highlighter="shiki" data-ext="ts" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">context</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">connection</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">sendBinary</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(byteArray: Uint8Array)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span></code></pre></div><p>ÄÄƒng kÃ½ nháº­n tin nháº¯n nhá»‹ phÃ¢n á»Ÿ Ä‘á»‹nh dáº¡ng Flatbuffer:</p><div class="language-ts" data-highlighter="shiki" data-ext="ts" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">context</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">connection</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">beginListenBinary</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(identifier:string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> callback:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">(</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EA999C;--shiki-dark-font-style:italic;">data</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;"> :</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#E5C890;--shiki-dark-font-style:italic;"> ByteBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">)</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;"> =&gt;</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;"> void</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span></code></pre></div><p>Há»§y Ä‘Äƒng kÃ½ nháº­n tin nháº¯n nhá»‹ phÃ¢n:</p><div class="language-ts" data-highlighter="shiki" data-ext="ts" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">context</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">connection</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">stopListenBinary</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(identifier:string)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span></code></pre></div><h4 id="m-m-u-flatbuffers" tabindex="-1"><a class="header-anchor" href="#m-m-u-flatbuffers"><span>MÃ£ máº«u Flatbuffers</span></a></h4><p>TrÆ°á»›c khi cÃ³ thá»ƒ gá»­i vÃ  nháº­n tin nháº¯n Flatbuffer, báº¡n cáº§n Ä‘á»‹nh nghÄ©a má»™t schema vÃ  biÃªn dá»‹ch nÃ³ sang TypeScript. Sau Ä‘Ã³, Ä‘Äƒng kÃ½ schema vá»›i há»‡ thá»‘ng káº¿t ná»‘i máº¡ng vÃ  sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c schema Ä‘Ã£ táº¡o Ä‘á»ƒ táº¡o vÃ  phÃ¢n tÃ­ch cÃº phÃ¡p tin nháº¯n.</p><ul><li><a href="#built-in-flatbuffer-schemas">CÃ¡c schema Flatbuffer tÃ­ch há»£p sáºµn trong Needle Engine</a></li><li><a href="https://google.github.io/flatbuffers/flatbuffers_guide_writing_schema.html" target="_blank" rel="noopener noreferrer">Táº¡o schema</a></li><li><a href="https://google.github.io/flatbuffers/flatbuffers_guide_using_schema_compiler.html" target="_blank" rel="noopener noreferrer">Sá»­ dá»¥ng trÃ¬nh biÃªn dá»‹ch schema</a></li><li><a href="https://google.github.io/flatbuffers/flatbuffers_guide_use_typescript.html" target="_blank" rel="noopener noreferrer">Flatbuffers trong Typescript</a></li></ul><p>::::code-group :::code-group-item ÄÄƒng kÃ½ schema</p><div class="language-ts" data-highlighter="shiki" data-ext="ts" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Register a new Flatbuffer schema with the networking system</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">import</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> registerBinaryType </span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;"> from</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &#39;@needle-tools/engine&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">import</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> MyDataModel </span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;"> from</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &#39;my-data-model.js&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">const</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> MySchemaIdentifier </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;MYSC&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">registerBinaryType</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(MySchemaIdentifier</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> MyDataModel</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">getRootAsSyncedTransformModel)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span></code></pre></div><p>::: :::code-group-item Gá»­i tin nháº¯n</p><div class="language-ts" data-highlighter="shiki" data-ext="ts" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Prepare data for sending by creating a Flatbuffer message:</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">import</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> MyDataModel </span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;"> from</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &#39;my-data-model.js&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">const</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> MySchemaIdentifier </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;MYSC&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">const</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> builder </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#CA9EE6;--shiki-dark-font-weight:bold;"> new</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> flatbuffers</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">Builder</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Construct a Flatbuffer message</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">function</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;"> createMyCustomModel</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">(</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EA999C;--shiki-dark-font-style:italic;">somePayload</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">:</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;"> string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">)</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">:</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#E5C890;--shiki-dark-font-style:italic;"> Uint8Array</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    builder</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">clear</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    MyDataModel</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">startMyDataModel</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(builder)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    </span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">    const</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> guidObj </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> builder</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">createString</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(guid)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    MyDataModel</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">addSomePayload</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(builder</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> guidObj)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">    const</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> res </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> MyDataModel</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">endMyDataModel</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(builder)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    builder</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">finish</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(res</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> MySchemaIdentifier)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">    return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> builder</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">asUint8Array</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Send the data</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">function</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;"> sendData</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">    const</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> data </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;"> createMyCustomModel</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">&quot;your-payload&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;"> this</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#EF9F76;"> true</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">    this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">context</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">connection</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">sendBinary</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(data)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span></span></code></pre></div><p>::: :::code-group-item Nháº­n tin nháº¯n</p><div class="language-ts" data-highlighter="shiki" data-ext="ts" style="--shiki-light:#4c4f69;--shiki-dark:#c6d0f5;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#303446;"><pre class="shiki shiki-themes catppuccin-latte catppuccin-frappe vp-code"><code><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#949CBB;--shiki-dark-font-style:italic;">// Subscribe to receive this specific message type:</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">import</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> MyDataModel </span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;"> from</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &#39;my-data-model.js&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">const</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> MySchemaIdentifier </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;"> &quot;MYSC&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#E78284;">this</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">context</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">connection</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">beginListenBinary</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(MySchemaIdentifier</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> (</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EA999C;--shiki-dark-font-style:italic;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">)</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;"> =&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;"> {</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CA9EE6;">    const</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> model </span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> MyDataModel</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">getRootAsMyDataModel</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(data)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">    console</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">log</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6D189;">&quot;Received binary message&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> model</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;"> model</span><span style="--shiki-light:#179299;--shiki-dark:#81C8BE;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#8CAAEE;--shiki-dark-font-style:italic;">somePayload</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">())</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">}</span><span style="--shiki-light:#4C4F69;--shiki-dark:#C6D0F5;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#949CBB;">;</span></span></code></pre></div><p>::: ::::</p><div class="hint-container tip"><p class="hint-container-title">Tin nháº¯n Flatbuffer tÃ¹y chá»‰nh vÃ  tÃ­nh bá»n vá»¯ng</p><p>Hiá»‡n táº¡i, cÃ¡c tin nháº¯n nhá»‹ phÃ¢n tÃ¹y chá»‰nh khÃ´ng thá»ƒ Ä‘Æ°á»£c duy trÃ¬ trÃªn mÃ¡y chá»§ káº¿t ná»‘i máº¡ng. Sá»­a Ä‘á»•i mÃ¡y chá»§ káº¿t ná»‘i máº¡ng vÃ  thÃªm cÃ¡c schema flatbuffer tÃ¹y chá»‰nh cá»§a báº¡n Ä‘á»ƒ Ä‘áº£m báº£o thuá»™c tÃ­nh guid cÃ³ thá»ƒ Ä‘Æ°á»£c xá»­ lÃ½.</p></div><h2 id="t-m-t-t" tabindex="-1"><a class="header-anchor" href="#t-m-t-t"><span>TÃ³m táº¯t</span></a></h2><p>Needle Engine lÃ m cho chá»§ Ä‘á» phá»©c táº¡p cá»§a káº¿t ná»‘i máº¡ng trá»Ÿ nÃªn dá»… tiáº¿p cáº­n vÃ  dá»… sá»­ dá»¥ng. Báº¡n cÃ³ thá»ƒ báº¯t Ä‘áº§u vá»›i káº¿t ná»‘i máº¡ng tá»± Ä‘á»™ng cho cÃ¡c component cá»§a mÃ¬nh chá»‰ vá»›i vÃ i dÃ²ng mÃ£ vÃ  báº¡n cÃ³ thá»ƒ tÃ¬m hiá»ƒu sÃ¢u hÆ¡n vá» káº¿t ná»‘i máº¡ng thá»§ cÃ´ng khi cáº§n kiá»ƒm soÃ¡t nhiá»u hÆ¡n.</p><p>Page automatically translated using AI</p>`,166)]))}const r=n(l,[["render",k]]),d=JSON.parse('{"path":"/lang/vn/networking.html","title":"Káº¿t ná»‘i máº¡ng","lang":"vn-VN","frontmatter":{"head":[["meta",{"name":"og:image","content":"https://engine.needle.tools/docs/.preview/vn: networking_vn.png"}],["meta",{"name":"og:description","content":"Needle Engine is a web-based runtime for 3D apps. It runs on your machine for development, and can be deployed anywhere. It is flexible, extensible, and collaboration and XR come naturally. Needle Exporter for Unity bridges the Unity Editor and the web runtime. It helps you to export your assets, animations, lightmaps and so on to the web. It is built around the glTF standard for 3D assets."}]],"description":"Needle Engine is a web-based runtime for 3D apps. It runs on your machine for development, and can be deployed anywhere. It is flexible, extensible, and collaboration and XR come naturally. Needle Exporter for Unity bridges the Unity Editor and the web runtime. It helps you to export your assets, animations, lightmaps and so on to the web. It is built around the glTF standard for 3D assets."},"headers":[{"level":2,"title":"KhÃ¡i niá»‡m káº¿t ná»‘i máº¡ng","slug":"kh-i-ni-m-k-t-n-i-m-ng","link":"#kh-i-ni-m-k-t-n-i-m-ng","children":[{"level":3,"title":"PhÃ²ng vÃ  Tráº¡ng thÃ¡i","slug":"ph-ng-v-tr-ng-th-i","link":"#ph-ng-v-tr-ng-th-i","children":[]},{"level":3,"title":"Quyá»n sá»Ÿ há»¯u","slug":"quy-n-s-h-u","link":"#quy-n-s-h-u","children":[]}]},{"level":2,"title":"KÃ­ch hoáº¡t káº¿t ná»‘i máº¡ng cho dá»± Ã¡n cá»§a báº¡n","slug":"k-ch-ho-t-k-t-n-i-m-ng-cho-d-n-c-a-b-n","link":"#k-ch-ho-t-k-t-n-i-m-ng-cho-d-n-c-a-b-n","children":[]},{"level":2,"title":"CÃ¡c Component tÃ­ch há»£p sáºµn vá»›i há»— trá»£ káº¿t ná»‘i máº¡ng","slug":"c-c-component-t-ch-h-p-s-n-v-i-h-tr-k-t-n-i-m-ng","link":"#c-c-component-t-ch-h-p-s-n-v-i-h-tr-k-t-n-i-m-ng","children":[]},{"level":2,"title":"Káº¿t ná»‘i máº¡ng tá»± Ä‘á»™ng cho cÃ¡c Component tÃ¹y chá»‰nh","slug":"k-t-n-i-m-ng-t-ng-cho-c-c-component-t-y-ch-nh","link":"#k-t-n-i-m-ng-t-ng-cho-c-c-component-t-y-ch-nh","children":[]},{"level":2,"title":"Táº¡o vÃ  há»§y Ä‘á»‘i tÆ°á»£ng","slug":"t-o-v-h-y-i-t-ng","link":"#t-o-v-h-y-i-t-ng","children":[]},{"level":2,"title":"Káº¿t ná»‘i máº¡ng thá»§ cÃ´ng","slug":"k-t-n-i-m-ng-th-c-ng","link":"#k-t-n-i-m-ng-th-c-ng","children":[{"level":3,"title":"Gá»­i tin nháº¯n","slug":"g-i-tin-nh-n","link":"#g-i-tin-nh-n","children":[]},{"level":3,"title":"Nháº­n tin nháº¯n","slug":"nh-n-tin-nh-n","link":"#nh-n-tin-nh-n","children":[]},{"level":3,"title":"Kiá»ƒm soÃ¡t tÃ­nh bá»n vá»¯ng cá»§a thÃ´ng bÃ¡o","slug":"ki-m-so-t-t-nh-b-n-v-ng-c-a-th-ng-b-o","link":"#ki-m-so-t-t-nh-b-n-v-ng-c-a-th-ng-b-o","children":[]},{"level":3,"title":"Sá»­ dá»¥ng cá» gá»¡ lá»—i Ä‘á»ƒ hiá»ƒu tin nháº¯n máº¡ng","slug":"s-d-ng-c-g-l-i-hi-u-tin-nh-n-m-ng","link":"#s-d-ng-c-g-l-i-hi-u-tin-nh-n-m-ng","children":[]}]},{"level":2,"title":"CÃ¡c sá»± kiá»‡n vÃ²ng Ä‘á»i káº¿t ná»‘i máº¡ng","slug":"c-c-s-ki-n-v-ng-i-k-t-n-i-m-ng","link":"#c-c-s-ki-n-v-ng-i-k-t-n-i-m-ng","children":[]},{"level":2,"title":"Sá»­ dá»¥ng MÃ¡y chá»§ káº¿t ná»‘i máº¡ng Needle","slug":"s-d-ng-m-y-ch-k-t-n-i-m-ng-needle","link":"#s-d-ng-m-y-ch-k-t-n-i-m-ng-needle","children":[]},{"level":2,"title":"LÆ°u trá»¯ MÃ¡y chá»§ káº¿t ná»‘i máº¡ng cá»§a riÃªng báº¡n","slug":"l-u-tr-m-y-ch-k-t-n-i-m-ng-c-a-ri-ng-b-n","link":"#l-u-tr-m-y-ch-k-t-n-i-m-ng-c-a-ri-ng-b-n","children":[{"level":3,"title":"Cáº¥u hÃ¬nh","slug":"c-u-h-nh","link":"#c-u-h-nh","children":[]}]},{"level":2,"title":"MÃ¡y chá»§ káº¿t ná»‘i máº¡ng cá»¥c bá»™","slug":"m-y-ch-k-t-n-i-m-ng-c-c-b","link":"#m-y-ch-k-t-n-i-m-ng-c-c-b","children":[]},{"level":2,"title":"NÃ¢ng cao: TÃ¹y chá»‰nh cÃ i Ä‘áº·t WebRTC cho peer.js","slug":"n-ng-cao-t-y-ch-nh-c-i-t-webrtc-cho-peer.js","link":"#n-ng-cao-t-y-ch-nh-c-i-t-webrtc-cho-peer.js","children":[]},{"level":2,"title":"NÃ¢ng cao: Äá»‹nh dáº¡ng thÃ´ng bÃ¡o cá»§a MÃ¡y chá»§ vÃ  Client","slug":"n-ng-cao-nh-d-ng-th-ng-b-o-c-a-m-y-ch-v-client","link":"#n-ng-cao-nh-d-ng-th-ng-b-o-c-a-m-y-ch-v-client","children":[{"level":3,"title":"CÃ¡c sá»± kiá»‡n phÃ²ng tÃ­ch há»£p sáºµn","slug":"c-c-s-ki-n-ph-ng-t-ch-h-p-s-n","link":"#c-c-s-ki-n-ph-ng-t-ch-h-p-s-n","children":[]},{"level":3,"title":"CÃ¡c sá»± kiá»‡n tiá»‡n Ã­ch tÃ­ch há»£p sáºµn","slug":"c-c-s-ki-n-ti-n-ch-t-ch-h-p-s-n","link":"#c-c-s-ki-n-ti-n-ch-t-ch-h-p-s-n","children":[]},{"level":3,"title":"CÃ¡c sá»± kiá»‡n quyá»n sá»Ÿ há»¯u tÃ­ch há»£p sáºµn","slug":"c-c-s-ki-n-quy-n-s-h-u-t-ch-h-p-s-n","link":"#c-c-s-ki-n-quy-n-s-h-u-t-ch-h-p-s-n","children":[]},{"level":3,"title":"CÃ¡c schema Flatbuffer tÃ­ch há»£p sáºµn","slug":"c-c-schema-flatbuffer-t-ch-h-p-s-n","link":"#c-c-schema-flatbuffer-t-ch-h-p-s-n","children":[]}]},{"level":2,"title":"NÃ¢ng cao: Tin nháº¯n nhá»‹ phÃ¢n á»Ÿ Ä‘á»‹nh dáº¡ng Flatbuffer","slug":"n-ng-cao-tin-nh-n-nh-ph-n-nh-d-ng-flatbuffer","link":"#n-ng-cao-tin-nh-n-nh-ph-n-nh-d-ng-flatbuffer","children":[]},{"level":2,"title":"TÃ³m táº¯t","slug":"t-m-t-t","link":"#t-m-t-t","children":[]}],"git":{"updatedTime":1745311490000,"contributors":[{"name":"Marcel Wiessler","username":"","email":"marcel@gaisterhand.de","commits":1}],"changelog":[{"hash":"25e22e2b0b9e4fc1e515be2b189c24864e21ac9f","time":1745311490000,"email":"marcel@gaisterhand.de","author":"Marcel Wiessler","message":"add multilanguage support"}]},"filePathRelative":"lang/vn/networking.md"}');export{r as comp,d as data};
